# ResourceRecommender æµ‹è¯•éªŒè¯æŠ¥å‘Š

**æµ‹è¯•æ—¶é—´**: 2025-12-08  
**æµ‹è¯•ç›®çš„**: éªŒè¯ ResourceRecommenderAgent æ˜¯å¦æ­£ç¡®è°ƒç”¨ web_search å·¥å…·ï¼Œå¹¶æ£€æŸ¥æ¨èèµ„æºçš„URLæœ‰æ•ˆæ€§

---

## âœ… æµ‹è¯•ç»“æœæ€»ç»“

### 1. Web Search å·¥å…·è°ƒç”¨çŠ¶æ€

**âœ… å·²æˆåŠŸè°ƒç”¨ web_search å·¥å…·ï¼**

- **æœç´¢æŸ¥è¯¢æ¬¡æ•°**: 18æ¬¡
- **æœç´¢å¼•æ“**: DuckDuckGo (Tavily APIè¿”å›432é”™è¯¯ï¼Œå·²è‡ªåŠ¨å›é€€åˆ°DuckDuckGo)
- **æ¨èèµ„æºæ•°é‡**: 8ä¸ª

**ä½¿ç”¨çš„æœç´¢æŸ¥è¯¢**:
1. React Hooks çŸ¥ä¹ æ·±åº¦è§£æ æœ€ä½³å®è·µ
2. React Hooks Bilibili å…¥é—¨åˆ°è¿›é˜¶ è§†é¢‘
3. React Hooks æ•™ç¨‹ æ˜é‡‘
4. React Hooks å®˜æ–¹æ–‡æ¡£ ä¸­æ–‡ç‰ˆ
5. React Hooks useReducer è‡ªå®šä¹‰Hook æœ€ä½³å®è·µ
6. React Hooks useReducer è‡ªå®šä¹‰Hook å®æˆ˜
7. React Hooks Bilibili è§†é¢‘æ•™ç¨‹
8. React Hooks å®˜æ–¹æ–‡æ¡£ ä¸­æ–‡
9. React Hooks æœ€ä½³å®è·µ
10. React Hooks æ˜é‡‘ ä¸­æ–‡æ•™ç¨‹
11. React Hooks çŸ¥ä¹ä¸“æ 
12. React Hooks official documentation
13. React Hooks å®˜æ–¹ä¸­æ–‡æ–‡æ¡£
14. React Hooks çŸ¥ä¹ æ·±åº¦è§£æ
15. React Hooks course udemy
16. A Complete Guide to useEffect
17. React Hooks æ˜é‡‘ é«˜è´¨é‡æ•™ç¨‹
18. React Hooks è§†é¢‘æ•™ç¨‹ bilibili

---

## ğŸ“Š èµ„æºURLæœ‰æ•ˆæ€§éªŒè¯

### éªŒè¯ç»“æœç»Ÿè®¡

| çŠ¶æ€ | æ•°é‡ | æ¯”ä¾‹ | è¯´æ˜ |
|------|------|------|------|
| âœ… æœ‰æ•ˆ (200) | 3 | 37.5% | URLå¯æ­£å¸¸è®¿é—® |
| âš ï¸ 403 Forbidden | 2 | 25% | å¯èƒ½éœ€è¦æµè§ˆå™¨User-Agent |
| âš ï¸ 412 | 1 | 12.5% | å®¢æˆ·ç«¯å‰ç½®æ¡ä»¶å¤±è´¥ |
| âŒ 404 Not Found | 2 | 25% | é“¾æ¥å·²å¤±æ•ˆ |
| **æ€»è®¡** | **8** | **100%** | |

**æœ‰æ•ˆç‡**: 37.5% (ä»…è®¡ç®—200çŠ¶æ€ç )  
**å¯èƒ½æœ‰æ•ˆç‡**: 75% (åŒ…å«403/412ç­‰å¯èƒ½é€šè¿‡æµè§ˆå™¨è®¿é—®çš„é“¾æ¥)  
**ç¡®è®¤å¤±æ•ˆç‡**: 25% (404é“¾æ¥)

---

## ğŸ“‹ æ¨èèµ„æºè¯¦æƒ…

### âœ… æœ‰æ•ˆèµ„æº (200)

1. **React å®˜æ–¹æ–‡æ¡£ - Hooks ä»‹ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰**
   - URL: https://zh-hans.react.dev/reference/react/hooks
   - ç±»å‹: documentation
   - ç›¸å…³æ€§: 0.98
   - çŠ¶æ€: âœ… 200 OK

2. **A Complete Guide to useEffect by Dan Abramov**
   - URL: https://overreacted.io/a-complete-guide-to-useeffect/
   - ç±»å‹: article
   - ç›¸å…³æ€§: 0.96
   - çŠ¶æ€: âœ… 200 OK

3. **React Hooks Official Documentation (English)**
   - URL: https://react.dev/reference/react/hooks
   - ç±»å‹: documentation
   - ç›¸å…³æ€§: 0.94
   - çŠ¶æ€: âœ… 200 OK

### âš ï¸ å¯èƒ½éœ€è¦æµè§ˆå™¨è®¿é—® (403/412)

4. **React Hooks æ·±åº¦è§£æï¼šuseEffect ä¸è‡ªå®šä¹‰ Hook å®æˆ˜ - çŸ¥ä¹ä¸“æ **
   - URL: https://zhuanlan.zhihu.com/p/621321457
   - ç±»å‹: article
   - ç›¸å…³æ€§: 0.90
   - çŠ¶æ€: âš ï¸ 403 (çŸ¥ä¹éœ€è¦User-Agent)

5. **React Hooks Course - Udemy: Mastering React Hooks**
   - URL: https://www.udemy.com/course/react-hooks-tutorial/
   - ç±»å‹: course
   - ç›¸å…³æ€§: 0.91
   - çŠ¶æ€: âš ï¸ 403 (Udemyéœ€è¦è®¤è¯)

6. **React Hooks è§†é¢‘æ•™ç¨‹ - Bilibili å…¥é—¨åˆ°ç²¾é€š**
   - URL: https://www.bilibili.com/video/BV1Xy4y1K7ZG
   - ç±»å‹: video
   - ç›¸å…³æ€§: 0.93
   - çŠ¶æ€: âš ï¸ 412 (Bç«™å¯èƒ½éœ€è¦Cookie)

### âŒ å¤±æ•ˆèµ„æº (404)

7. **React Hooks å…¥é—¨åˆ°è¿›é˜¶ï¼šä»åŸç†åˆ°å®æˆ˜ - æ˜é‡‘**
   - URL: https://juejin.cn/post/7150324667322814471
   - ç±»å‹: article
   - ç›¸å…³æ€§: 0.95
   - çŠ¶æ€: âŒ 404 Not Found

8. **useHooks - React Hooks ä»£ç ç‰‡æ®µåº“ï¼ˆä¸­æ–‡ç‰ˆï¼‰**
   - URL: https://usehooks.com/zh
   - ç±»å‹: tool
   - ç›¸å…³æ€§: 0.87
   - çŠ¶æ€: âŒ 404 Not Found

---

## ğŸ” å‘ç°çš„é—®é¢˜

### é—®é¢˜1: Tavily API è¿”å› 432 é”™è¯¯

**ç°è±¡**:
```
[warning] web_search_tavily_failed 
error="Client error '432 ' for url 'https://api.tavily.com/search'"
```

**åŸå› åˆ†æ**:
- HTTP 432 ä¸æ˜¯æ ‡å‡†çŠ¶æ€ç ï¼Œå¯èƒ½æ˜¯ Tavily API çš„è‡ªå®šä¹‰é”™è¯¯
- å¯èƒ½åŸå› ï¼š
  1. API Key æœªé…ç½®æˆ–æ— æ•ˆ
  2. è¯·æ±‚é¢‘ç‡è¶…é™
  3. è´¦æˆ·é…é¢ä¸è¶³

**å½“å‰å¤„ç†**:
- âœ… ç³»ç»Ÿå·²è‡ªåŠ¨å›é€€åˆ° DuckDuckGo
- âœ… DuckDuckGo æœç´¢æˆåŠŸæ‰§è¡Œ

**å»ºè®®æªæ–½**:
```bash
# æ£€æŸ¥ Tavily API Key é…ç½®
grep TAVILY_API_KEY backend/.env

# å¦‚æœæœªé…ç½®æˆ–æ— æ•ˆï¼Œè¯·æ³¨å†Œå¹¶æ›´æ–°
# è®¿é—®: https://tavily.com/
```

### é—®é¢˜2: 25% çš„æ¨èé“¾æ¥ä¸º404

**å¤±æ•ˆé“¾æ¥**:
1. https://juejin.cn/post/7150324667322814471 (æ˜é‡‘æ–‡ç« )
2. https://usehooks.com/zh (å·¥å…·ç½‘ç«™)

**æ ¹æœ¬åŸå› **:
- æœç´¢å¼•æ“è¿”å›çš„ç»“æœæœªç»URLæœ‰æ•ˆæ€§éªŒè¯
- DuckDuckGo ç´¢å¼•å¯èƒ½åŒ…å«è¿‡æ—¶å†…å®¹
- LLM å¯èƒ½åŸºäºè®­ç»ƒæ•°æ®"å¹»è§‰"ç”ŸæˆURL

**å½±å“**:
- ç”¨æˆ·ç‚¹å‡»è¿™äº›é“¾æ¥ä¼šé‡åˆ°404é”™è¯¯
- é™ä½ç”¨æˆ·ä½“éªŒå’Œèµ„æºå¯ä¿¡åº¦

### é—®é¢˜3: 403/412 å“åº”éœ€è¦ç‰¹æ®Šå¤„ç†

**æ¶‰åŠç«™ç‚¹**:
- çŸ¥ä¹ (zhuanlan.zhihu.com)
- Udemy (udemy.com)
- Bilibili (bilibili.com)

**åŸå› **:
- è¿™äº›ç½‘ç«™éœ€è¦ç‰¹å®šçš„ User-Agent æˆ– Cookie
- HEAD è¯·æ±‚è¢«æ‹’ç»ï¼Œä½† GET è¯·æ±‚å¯èƒ½æˆåŠŸ

**è¯´æ˜**:
- è¿™äº›URLå®é™…ä¸Š**å¯èƒ½æ˜¯æœ‰æ•ˆçš„**
- åªæ˜¯ç®€å•çš„ HEAD è¯·æ±‚æ— æ³•éªŒè¯

---

## ğŸ’¡ æ”¹è¿›å»ºè®®

### ä¼˜å…ˆçº§1: æ·»åŠ URLæœ‰æ•ˆæ€§éªŒè¯ â­â­â­â­â­

**ç›®æ ‡**: è¿‡æ»¤æ‰404å¤±æ•ˆé“¾æ¥

**å®æ–½æ–¹æ¡ˆ**: å‚è€ƒ `RESOURCE_RECOMMENDER_ANALYSIS.md` ä¸­çš„æ–¹æ¡ˆ1

**é¢„æœŸæ•ˆæœ**:
- 404é“¾æ¥è¿‡æ»¤ç‡: 100%
- URLæœ‰æ•ˆç‡æå‡: ä»37.5% â†’ 50%+ (å‰”é™¤å¤±æ•ˆé“¾æ¥)

### ä¼˜å…ˆçº§2: æ”¹è¿›URLéªŒè¯ç­–ç•¥ â­â­â­â­

**é’ˆå¯¹403/412å“åº”çš„ä¼˜åŒ–**:

```python
async def verify_url(url: str) -> tuple[bool, int, str]:
    """æ”¹è¿›çš„URLéªŒè¯"""
    headers = {
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) "
                     "AppleWebKit/537.36 (KHTML, like Gecko) "
                     "Chrome/120.0.0.0 Safari/537.36"
    }
    
    async with httpx.AsyncClient(timeout=10.0, follow_redirects=True) as client:
        # å…ˆå°è¯• HEAD
        try:
            response = await client.head(url, headers=headers)
            if response.status_code == 200:
                return True, 200, "âœ… æœ‰æ•ˆ"
        except:
            pass
        
        # å¦‚æœ HEAD å¤±è´¥ï¼Œå°è¯• GET è¯·æ±‚ï¼ˆåªè¯»å–å‰1KBï¼‰
        try:
            async with client.stream("GET", url, headers=headers) as response:
                if response.status_code == 200:
                    return True, 200, "âœ… æœ‰æ•ˆ (é€šè¿‡GETéªŒè¯)"
                elif response.status_code in [403, 412]:
                    return True, response.status_code, "âš ï¸ å¯èƒ½éœ€è¦æµè§ˆå™¨è®¿é—®"
                elif response.status_code == 404:
                    return False, 404, "âŒ 404 Not Found"
        except Exception as e:
            return False, None, f"âŒ é”™è¯¯: {str(e)}"
```

**é¢„æœŸæ•ˆæœ**:
- å‡å°‘è¯¯åˆ¤ï¼ˆ403/412è¢«æ­£ç¡®è¯†åˆ«ä¸º"å¯èƒ½æœ‰æ•ˆ"ï¼‰
- æå‡æ•´ä½“å¯ç”¨ç‡: 50% â†’ 75%+

### ä¼˜å…ˆçº§3: ä¿®å¤ Tavily API é…ç½® â­â­â­â­

**æ­¥éª¤**:
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `TAVILY_API_KEY`
2. å¦‚æœæœªé…ç½®ï¼Œè®¿é—® https://tavily.com/ æ³¨å†Œ
3. è·å– API Key å¹¶æ›´æ–°é…ç½®
4. é‡å¯æœåŠ¡

**ä¼˜åŠ¿**:
- Tavily æä¾›æ›´é«˜è´¨é‡çš„æœç´¢ç»“æœ
- æ”¯æŒæ—¶é—´ç­›é€‰ (`days` å‚æ•°)
- æä¾›å‘å¸ƒæ—¥æœŸä¿¡æ¯

### ä¼˜å…ˆçº§4: å¯ç”¨æ—¶é—´ç­›é€‰ â­â­â­

**ä¿®æ”¹ä½ç½®**: `backend/app/tools/search/web_search.py`

```python
# åœ¨ _search_with_tavily() ä¸­æ·»åŠ 
"days": 730,  # åªæœç´¢æœ€è¿‘2å¹´çš„å†…å®¹
```

**é¢„æœŸæ•ˆæœ**:
- å‡å°‘è¿‡æ—¶èµ„æºæ¨è
- æå‡èµ„æºæ—¶æ•ˆæ€§

---

## ğŸ“ˆ æµ‹è¯•ç»“è®º

### âœ… æˆåŠŸéªŒè¯çš„åŠŸèƒ½

1. **web_search å·¥å…·é›†æˆæ­£å¸¸**
   - âœ… ResourceRecommenderAgent æ­£ç¡®è°ƒç”¨ web_search
   - âœ… LLM é€šè¿‡ Function Calling å¤šæ¬¡æœç´¢
   - âœ… Tavily â†’ DuckDuckGo è‡ªåŠ¨å›é€€æœºåˆ¶å·¥ä½œæ­£å¸¸

2. **æœç´¢ç­–ç•¥æœ‰æ•ˆ**
   - âœ… é’ˆå¯¹ä¸­æ–‡èµ„æºæœç´¢: æ˜é‡‘ã€çŸ¥ä¹ã€Bilibili
   - âœ… é’ˆå¯¹è‹±æ–‡èµ„æºæœç´¢: React å®˜æ–¹æ–‡æ¡£ã€Dan Abramov æ–‡ç« 
   - âœ… å¤šç§èµ„æºç±»å‹è¦†ç›–: documentation, article, video, course, tool

3. **æ¨èè´¨é‡å¯æ¥å—**
   - âœ… 37.5% çš„é“¾æ¥å®Œå…¨æœ‰æ•ˆ
   - âœ… 75% çš„é“¾æ¥å¯èƒ½æœ‰æ•ˆï¼ˆåŒ…å«éœ€è¦æµè§ˆå™¨è®¿é—®çš„ï¼‰
   - âœ… é«˜ç›¸å…³æ€§èµ„æº (0.87-0.98åˆ†)

### âš ï¸ éœ€è¦æ”¹è¿›çš„åœ°æ–¹

1. **URLæœ‰æ•ˆæ€§éªŒè¯ç¼ºå¤±** (ä¼˜å…ˆçº§æœ€é«˜)
   - 25% çš„æ¨èé“¾æ¥ä¸º404
   - éœ€è¦å®æ–½URLéªŒè¯è¿‡æ»¤

2. **Tavily APIé…ç½®é—®é¢˜**
   - å½“å‰å›é€€åˆ° DuckDuckGo
   - éœ€è¦é…ç½®æœ‰æ•ˆçš„ Tavily API Key

3. **éªŒè¯ç­–ç•¥ä¸å¤Ÿå®Œå–„**
   - ç®€å•çš„ HEAD è¯·æ±‚å¯¹éƒ¨åˆ†ç½‘ç«™ä¸é€‚ç”¨
   - éœ€è¦æ¨¡æ‹Ÿæµè§ˆå™¨ User-Agent

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œ (ä»Šå¤©)

1. âœ… æµ‹è¯•è„šæœ¬å·²å®Œæˆå¹¶éªŒè¯
2. ğŸ”² ä¿®å¤ Tavily API é…ç½®
   ```bash
   # æ£€æŸ¥é…ç½®
   grep TAVILY_API_KEY backend/.env
   
   # å¦‚æœæ— æ•ˆï¼Œè®¿é—® https://tavily.com/ è·å–æ–°Key
   ```

### çŸ­æœŸå®æ–½ (æœ¬å‘¨)

3. ğŸ”² å®æ–½æ–¹æ¡ˆ1: æ·»åŠ URLæœ‰æ•ˆæ€§éªŒè¯
   - ä¿®æ”¹ `backend/app/agents/resource_recommender.py`
   - æ·»åŠ  `_verify_urls()` æ–¹æ³•
   - é¢„æœŸç”¨æ—¶: 30-60åˆ†é’Ÿ

4. ğŸ”² å®æ–½æ–¹æ¡ˆ2: å¯ç”¨Tavilyæ—¶é—´ç­›é€‰
   - ä¿®æ”¹ `backend/app/tools/search/web_search.py`
   - æ·»åŠ  `days: 730` å‚æ•°
   - é¢„æœŸç”¨æ—¶: 15åˆ†é’Ÿ

### ä¸­æœŸä¼˜åŒ– (ä¸‹å‘¨)

5. ğŸ”² å®æ–½æ–¹æ¡ˆ3: å¢å¼ºPrompt
   - æ›´æ–° `backend/prompts/resource_recommender.j2`
   - æ·»åŠ æ—¶æ•ˆæ€§è¦æ±‚
   - é¢„æœŸç”¨æ—¶: 30åˆ†é’Ÿ

6. ğŸ”² æ”¹è¿›URLéªŒè¯ç­–ç•¥
   - æ·»åŠ  User-Agent æ¨¡æ‹Ÿ
   - å®æ–½ HEAD â†’ GET å›é€€æœºåˆ¶
   - é¢„æœŸç”¨æ—¶: 1å°æ—¶

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†åˆ†ææŠ¥å‘Š**: `RESOURCE_RECOMMENDER_ANALYSIS.md`
- **å¿«é€Ÿä¿®å¤æŒ‡å—**: `ISSUE_FIX_SUMMARY_RESOURCE_404.md`
- **æµ‹è¯•è„šæœ¬**: `backend/scripts/test_resource_quality_quick.py`
- **å®Œæ•´æµ‹è¯•è„šæœ¬**: `backend/scripts/test_resource_quality.py`

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-08  
**æµ‹è¯•æ‰§è¡Œè€…**: Cursor AI  
**é¡¹ç›®**: Roadmap Agent - ResourceRecommender Quality Test

