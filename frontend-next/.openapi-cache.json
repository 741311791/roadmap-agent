{
  "openapi": "3.1.0",
  "info": {
    "title": "Learning Roadmap Generation System",
    "description": "基于 Multi-Agent 的个性化学习路线图生成系统",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/roadmaps/generate": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Generate Roadmap",
        "description": "生成学习路线图（异步任务）\n\nReturns:\n    任务 ID，roadmap_id将在需求分析完成后通过WebSocket发送给前端",
        "operationId": "generate_roadmap_api_v1_roadmaps_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Generate Roadmap Api V1 Roadmaps Generate Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{task_id}/status": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Roadmap Status",
        "description": "查询路线图生成状态",
        "operationId": "get_roadmap_status_api_v1_roadmaps__task_id__status_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/retry-failed": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Retry Failed Content",
        "description": "断点续传：重新生成失败的内容\n\n精确到内容类型粒度，只重跑失败的部分：\n- content_status='failed' 的教程\n- resources_status='failed' 的资源推荐\n- quiz_status='failed' 的测验\n\nArgs:\n    roadmap_id: 路线图 ID\n    request: 包含用户偏好和要重试的内容类型\n    \nReturns:\n    task_id 用于 WebSocket 订阅进度",
        "operationId": "retry_failed_content_api_v1_roadmaps__roadmap_id__retry_failed_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__v1__roadmap__RetryFailedRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/tutorial/retry": {
      "post": {
        "tags": [
          "generation"
        ],
        "summary": "Retry Tutorial",
        "description": "重试单个概念的教程生成\n\n当教程生成失败时，用户可以调用此接口重新生成教程内容。\n支持实时 WebSocket 推送生成状态。\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    request: 包含用户学习偏好的请求\n    \nReturns:\n    重试结果，包含是否成功和生成的数据",
        "operationId": "retry_tutorial_api_v1_roadmaps__roadmap_id__concepts__concept_id__tutorial_retry_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetryContentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetryContentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/resources/retry": {
      "post": {
        "tags": [
          "generation"
        ],
        "summary": "Retry Resources",
        "description": "重试单个概念的资源推荐生成\n\n当资源推荐生成失败时，用户可以调用此接口重新生成资源列表。\n支持实时 WebSocket 推送生成状态。\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    request: 包含用户学习偏好的请求\n    \nReturns:\n    重试结果，包含是否成功和生成的数据",
        "operationId": "retry_resources_api_v1_roadmaps__roadmap_id__concepts__concept_id__resources_retry_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetryContentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetryContentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/quiz/retry": {
      "post": {
        "tags": [
          "generation"
        ],
        "summary": "Retry Quiz",
        "description": "重试单个概念的测验生成\n\n当测验生成失败时，用户可以调用此接口重新生成测验题目。\n支持实时 WebSocket 推送生成状态。\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    request: 包含用户学习偏好的请求\n    \nReturns:\n    重试结果，包含是否成功和生成的数据",
        "operationId": "retry_quiz_api_v1_roadmaps__roadmap_id__concepts__concept_id__quiz_retry_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetryContentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetryContentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Roadmap",
        "description": "获取完整的路线图数据\n\nReturns:\n    - 如果路线图存在，返回完整的路线图框架数据\n    - 如果路线图不存在但有活跃任务，返回生成中状态\n    - 如果都不存在，返回 404",
        "operationId": "get_roadmap_api_v1_roadmaps__roadmap_id__get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Soft Delete Roadmap",
        "description": "删除路线图\n\n根据 roadmap_id 格式自动判断删除方式：\n1. 如果是 \"task-{uuid}\" 格式：\n   - 物理删除 roadmap_tasks 表中的任务记录\n   - 适用于失败或进行中的任务（尚未生成完整路线图）\n\n2. 如果是普通格式（如 \"python-guide-xxx\"）：\n   - 软删除 roadmap_metadata 表中的记录（设置 deleted_at 字段）\n   - 关联的 roadmap_tasks 记录保留用于追踪\n   - 可通过回收站恢复\n\nArgs:\n    roadmap_id: 路线图 ID\n    user_id: 用户 ID（用于权限验证）\n    \nReturns:\n    删除结果\n    \nRaises:\n    HTTPException: 如果路线图不存在或无权限",
        "operationId": "soft_delete_roadmap_api_v1_roadmaps__roadmap_id__delete",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/active-task": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Roadmap Active Task",
        "description": "获取路线图当前的活跃任务\n\n用于前端轮询：查询该路线图是否有正在进行的任务\n- 如果有正在进行的任务，返回task_id和状态\n- 如果没有，返回null\n\nArgs:\n    roadmap_id: 路线图 ID\n    \nReturns:\n    活跃任务信息或null",
        "operationId": "get_roadmap_active_task_api_v1_roadmaps__roadmap_id__active_task_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{task_id}/approve": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Approve Roadmap",
        "description": "人工审核端点（Human-in-the-Loop）\n\nArgs:\n    task_id: 任务 ID\n    approved: 是否批准\n    feedback: 用户反馈（如果未批准）",
        "operationId": "approve_roadmap_api_v1_roadmaps__task_id__approve_post",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          },
          {
            "name": "approved",
            "in": "query",
            "required": true,
            "schema": {
              "type": "boolean",
              "title": "Approved"
            }
          },
          {
            "name": "feedback",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Feedback"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/tutorials": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Tutorial Versions",
        "description": "获取指定概念的所有教程版本历史\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    \nReturns:\n    教程版本列表（按版本号降序，最新版本在前）",
        "operationId": "get_tutorial_versions_api_v1_roadmaps__roadmap_id__concepts__concept_id__tutorials_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/tutorials/latest": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Latest Tutorial",
        "description": "获取指定概念的最新教程版本\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    \nReturns:\n    最新版本的教程元数据",
        "operationId": "get_latest_tutorial_api_v1_roadmaps__roadmap_id__concepts__concept_id__tutorials_latest_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/tutorials/v{version}": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Tutorial By Version",
        "description": "获取指定概念的特定版本教程\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    version: 版本号\n    \nReturns:\n    指定版本的教程元数据",
        "operationId": "get_tutorial_by_version_api_v1_roadmaps__roadmap_id__concepts__concept_id__tutorials_v_version__get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          },
          {
            "name": "version",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Version"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/resources": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Concept Resources",
        "description": "获取指定概念的学习资源\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    \nReturns:\n    资源推荐列表",
        "operationId": "get_concept_resources_api_v1_roadmaps__roadmap_id__concepts__concept_id__resources_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/quiz": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Concept Quiz",
        "description": "获取指定概念的测验\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    \nReturns:\n    测验数据，包含题目列表",
        "operationId": "get_concept_quiz_api_v1_roadmaps__roadmap_id__concepts__concept_id__quiz_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/tutorial/modify": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Modify Tutorial",
        "description": "修改指定概念的教程内容\n\n使用 TutorialModifierAgent 增量修改现有教程。",
        "operationId": "modify_tutorial_api_v1_roadmaps__roadmap_id__concepts__concept_id__tutorial_modify_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__v1__roadmap__ModifyContentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/resources/modify": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Modify Resources",
        "description": "修改指定概念的学习资源\n\n使用 ResourceModifierAgent 调整现有资源推荐。",
        "operationId": "modify_resources_api_v1_roadmaps__roadmap_id__concepts__concept_id__resources_modify_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__v1__roadmap__ModifyContentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/quiz/modify": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Modify Quiz",
        "description": "修改指定概念的测验题目\n\n使用 QuizModifierAgent 调整现有测验。",
        "operationId": "modify_quiz_api_v1_roadmaps__roadmap_id__concepts__concept_id__quiz_modify_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__v1__roadmap__ModifyContentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/regenerate": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Regenerate Tutorial",
        "description": "重新生成指定概念的教程（创建新版本）\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    request: 包含用户 ID 和学习偏好\n    \nReturns:\n    新生成的教程元数据（包含版本号）\n    \n说明：\n- 重新生成会创建新版本，不会覆盖旧版本\n- 新版本会自动标记为最新（is_latest=True）\n- 旧版本会被标记为非最新（is_latest=False）",
        "operationId": "regenerate_tutorial_api_v1_roadmaps__roadmap_id__concepts__concept_id__regenerate_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateTutorialRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/{task_id}/retry": {
      "post": {
        "tags": [
          "tasks"
        ],
        "summary": "Retry Task",
        "description": "智能重试失败的任务\n\n两种重试策略：\n1. **Checkpoint 恢复**（粗粒度）：\n   - 适用于工作流早期阶段失败（intent_analysis, curriculum_design, roadmap_edit等）\n   - 从 LangGraph checkpoint 恢复，继续执行工作流\n   - 保留所有中间状态\n\n2. **内容重试**（细粒度）：\n   - 适用于内容生成阶段部分失败\n   - 扫描 framework_data，只重新生成失败的 Concept 内容\n   - 节省 API 调用成本\n\n自动判断逻辑：\n- 如果存在 checkpoint 且任务失败在内容生成之前 → Checkpoint 恢复\n- 如果有失败的 Concept 内容 → 内容重试\n- 如果 force_checkpoint=true → 强制使用 Checkpoint 恢复\n\nArgs:\n    task_id: 任务 ID\n    user_id: 用户 ID\n    force_checkpoint: 强制使用 checkpoint 恢复\n    background_tasks: FastAPI 后台任务\n    db: 数据库会话\n    \nReturns:\n    重试任务的信息\n    \nRaises:\n    HTTPException: 404 - 任务不存在\n    HTTPException: 400 - 无法重试（没有 checkpoint 也没有失败内容）",
        "operationId": "retry_task_api_v1_tasks__task_id__retry_post",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "用户ID",
              "title": "User Id"
            },
            "description": "用户ID"
          },
          {
            "name": "force_checkpoint",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "强制使用 checkpoint 恢复",
              "default": false,
              "title": "Force Checkpoint"
            },
            "description": "强制使用 checkpoint 恢复"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/progress/roadmaps/{roadmap_id}/concepts/{concept_id}": {
      "put": {
        "tags": [
          "Progress"
        ],
        "summary": "Update Concept Progress",
        "description": "标记/取消 Concept 完成状态\n\n- **is_completed=true**: 标记完成\n- **is_completed=false**: 取消完成",
        "operationId": "update_concept_progress_api_v1_progress_roadmaps__roadmap_id__concepts__concept_id__put",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          },
          {
            "name": "x-user-id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-User-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConceptProgressUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConceptProgressResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/progress/roadmaps/{roadmap_id}/concepts": {
      "get": {
        "tags": [
          "Progress"
        ],
        "summary": "Get Roadmap Progress",
        "description": "获取某个路线图的所有Concept进度",
        "operationId": "get_roadmap_progress_api_v1_progress_roadmaps__roadmap_id__concepts_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "x-user-id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-User-Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConceptProgressResponse"
                  },
                  "title": "Response Get Roadmap Progress Api V1 Progress Roadmaps  Roadmap Id  Concepts Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/progress/roadmaps/{roadmap_id}/concepts/{concept_id}/quiz": {
      "post": {
        "tags": [
          "Progress"
        ],
        "summary": "Submit Quiz Attempt",
        "description": "提交Quiz答题记录",
        "operationId": "submit_quiz_attempt_api_v1_progress_roadmaps__roadmap_id__concepts__concept_id__quiz_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          },
          {
            "name": "x-user-id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-User-Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QuizAttemptCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QuizAttemptResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/{task_id}/validation/latest": {
      "get": {
        "tags": [
          "validation"
        ],
        "summary": "Get Latest Validation",
        "description": "获取任务的最新验证结果\n\nArgs:\n    task_id: 任务 ID\n    db: 数据库会话\n    \nReturns:\n    最新的验证记录，包含验证结果、问题列表等\n    \nRaises:\n    HTTPException: 404 - 验证记录不存在\n    \nExample:\n    ```json\n    {\n        \"id\": \"uuid\",\n        \"task_id\": \"task-123\",\n        \"roadmap_id\": \"roadmap-456\",\n        \"is_valid\": false,\n        \"overall_score\": 75.5,\n        \"issues\": {\n            \"issues\": [\n                {\n                    \"severity\": \"critical\",\n                    \"location\": \"Stage 2 > Module 1\",\n                    \"issue\": \"循环依赖检测到\",\n                    \"suggestion\": \"移除 Concept A -> B -> A 的依赖\"\n                }\n            ]\n        },\n        \"validation_round\": 1,\n        \"critical_count\": 2,\n        \"warning_count\": 5,\n        \"suggestion_count\": 3,\n        \"created_at\": \"2024-01-01T00:00:00\"\n    }\n    ```",
        "operationId": "get_latest_validation_api_v1_tasks__task_id__validation_latest_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/{task_id}/validation/history": {
      "get": {
        "tags": [
          "validation"
        ],
        "summary": "Get Validation History",
        "description": "获取任务的所有验证历史记录\n\nArgs:\n    task_id: 任务 ID\n    db: 数据库会话\n    \nReturns:\n    验证记录列表（按轮次降序排列）\n    \nExample:\n    ```json\n    [\n        {\n            \"id\": \"uuid-1\",\n            \"task_id\": \"task-123\",\n            \"validation_round\": 2,\n            \"is_valid\": true,\n            \"overall_score\": 92.0,\n            \"created_at\": \"2024-01-01T01:00:00\"\n        },\n        {\n            \"id\": \"uuid-2\",\n            \"task_id\": \"task-123\",\n            \"validation_round\": 1,\n            \"is_valid\": false,\n            \"overall_score\": 75.5,\n            \"created_at\": \"2024-01-01T00:00:00\"\n        }\n    ]\n    ```",
        "operationId": "get_validation_history_api_v1_tasks__task_id__validation_history_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/{task_id}/edit/latest": {
      "get": {
        "tags": [
          "edit"
        ],
        "summary": "Get Latest Edit",
        "description": "获取任务的最新编辑记录（包含 modified_node_ids）\n\nArgs:\n    task_id: 任务 ID\n    db: 数据库会话\n    \nReturns:\n    最新的编辑记录，包含修改的节点 ID 列表\n    \nRaises:\n    HTTPException: 404 - 编辑记录不存在\n    \nExample:\n    ```json\n    {\n        \"id\": \"uuid\",\n        \"task_id\": \"task-123\",\n        \"roadmap_id\": \"roadmap-456\",\n        \"modification_summary\": \"AI 根据第 1 轮验证结果优化了路线图结构\",\n        \"modified_node_ids\": [\"concept-1\", \"concept-5\", \"concept-12\"],\n        \"edit_round\": 1,\n        \"created_at\": \"2024-01-01T00:00:00\"\n    }\n    ```",
        "operationId": "get_latest_edit_api_v1_tasks__task_id__edit_latest_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/{task_id}/edit/history": {
      "get": {
        "tags": [
          "edit"
        ],
        "summary": "Get Edit History",
        "description": "获取任务的所有编辑历史记录\n\nArgs:\n    task_id: 任务 ID\n    db: 数据库会话\n    \nReturns:\n    编辑记录列表（按轮次降序排列）\n    \nExample:\n    ```json\n    [\n        {\n            \"id\": \"uuid-1\",\n            \"task_id\": \"task-123\",\n            \"edit_round\": 2,\n            \"modification_summary\": \"AI 根据第 2 轮验证结果优化了路线图结构\",\n            \"modified_nodes_count\": 3,\n            \"created_at\": \"2024-01-01T01:00:00\"\n        },\n        {\n            \"id\": \"uuid-2\",\n            \"task_id\": \"task-123\",\n            \"edit_round\": 1,\n            \"modification_summary\": \"AI 根据第 1 轮验证结果优化了路线图结构\",\n            \"modified_nodes_count\": 5,\n            \"created_at\": \"2024-01-01T00:00:00\"\n        }\n    ]\n    ```",
        "operationId": "get_edit_history_api_v1_tasks__task_id__edit_history_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/{task_id}/edit/{edit_round}/diff": {
      "get": {
        "tags": [
          "edit"
        ],
        "summary": "Get Edit Diff",
        "description": "获取特定编辑轮次的前后对比数据\n\n返回完整的 origin_framework_data 和 modified_framework_data，\n用于前端展示详细的变更对比。\n\nArgs:\n    task_id: 任务 ID\n    edit_round: 编辑轮次\n    db: 数据库会话\n    \nReturns:\n    包含原始框架和修改后框架的完整数据\n    \nRaises:\n    HTTPException: 404 - 编辑记录不存在",
        "operationId": "get_edit_diff_api_v1_tasks__task_id__edit__edit_round__diff_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          },
          {
            "name": "edit_round",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Edit Round"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/mentor/chat/stream": {
      "post": {
        "tags": [
          "mentor"
        ],
        "summary": "Chat Stream",
        "description": "伴学Agent流式对话\n\n使用SSE实时推送AI响应，支持打字机效果。\n\nSSE事件格式：\n- {type: 'session_id', session_id: string}: 会话ID\n- {type: 'content', chunk: string}: 内容片段\n- {type: 'done', message_id: string}: 完成标记\n- {type: 'error', message: string}: 错误信息\n\nArgs:\n    request: 聊天请求，包含user_id, roadmap_id, concept_id, message, session_id\n    \nReturns:\n    SSE流",
        "operationId": "chat_stream_api_v1_mentor_chat_stream_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatMessageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/mentor/sessions/{roadmap_id}": {
      "get": {
        "tags": [
          "mentor"
        ],
        "summary": "Get Sessions",
        "description": "获取用户在指定路线图下的所有聊天会话\n\nArgs:\n    roadmap_id: 路线图ID\n    user_id: 用户ID\n    limit: 返回数量限制\n    offset: 分页偏移\n    \nReturns:\n    会话列表",
        "operationId": "get_sessions_api_v1_mentor_sessions__roadmap_id__get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "用户ID",
              "title": "User Id"
            },
            "description": "用户ID"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "description": "返回数量限制",
              "default": 50,
              "title": "Limit"
            },
            "description": "返回数量限制"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "分页偏移",
              "default": 0,
              "title": "Offset"
            },
            "description": "分页偏移"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Sessions Api V1 Mentor Sessions  Roadmap Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/mentor/messages/{session_id}": {
      "get": {
        "tags": [
          "mentor"
        ],
        "summary": "Get Messages",
        "description": "获取会话的历史消息\n\nArgs:\n    session_id: 会话ID\n    limit: 返回数量限制\n    offset: 分页偏移\n    \nReturns:\n    消息列表",
        "operationId": "get_messages_api_v1_mentor_messages__session_id__get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "description": "返回数量限制",
              "default": 50,
              "title": "Limit"
            },
            "description": "返回数量限制"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "分页偏移",
              "default": 0,
              "title": "Offset"
            },
            "description": "分页偏移"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Messages Api V1 Mentor Messages  Session Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/mentor/notes/{roadmap_id}": {
      "get": {
        "tags": [
          "mentor"
        ],
        "summary": "Get Notes",
        "description": "获取用户的学习笔记\n\nArgs:\n    roadmap_id: 路线图ID\n    user_id: 用户ID\n    concept_id: 概念ID（可选）\n    limit: 返回数量限制\n    offset: 分页偏移\n    \nReturns:\n    笔记列表",
        "operationId": "get_notes_api_v1_mentor_notes__roadmap_id__get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "用户ID",
              "title": "User Id"
            },
            "description": "用户ID"
          },
          {
            "name": "concept_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "概念ID（可选，用于过滤）",
              "title": "Concept Id"
            },
            "description": "概念ID（可选，用于过滤）"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "description": "返回数量限制",
              "default": 50,
              "title": "Limit"
            },
            "description": "返回数量限制"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "分页偏移",
              "default": 0,
              "title": "Offset"
            },
            "description": "分页偏移"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Notes Api V1 Mentor Notes  Roadmap Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/mentor/notes/{note_id}": {
      "delete": {
        "tags": [
          "mentor"
        ],
        "summary": "Delete Note",
        "description": "删除学习笔记\n\nArgs:\n    note_id: 笔记ID\n    user_id: 用户ID（用于权限验证）\n    \nReturns:\n    删除结果",
        "operationId": "delete_note_api_v1_mentor_notes__note_id__delete",
        "parameters": [
          {
            "name": "note_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Note Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "用户ID",
              "title": "User Id"
            },
            "description": "用户ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Note Api V1 Mentor Notes  Note Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tech-assessments/available-technologies": {
      "get": {
        "tags": [
          "tech-assessments"
        ],
        "summary": "Get Available Technologies",
        "description": "获取所有有测验题目的技术栈列表\n\nReturns:\n    所有可用技术栈的列表（去重并排序）\n    \nExample:\n    GET /api/v1/tech-assessments/available-technologies\n    Response: {\n        \"technologies\": [\"angular\", \"aws\", \"docker\", \"python\", \"react\", ...],\n        \"count\": 20\n    }",
        "operationId": "get_available_technologies_api_v1_tech_assessments_available_technologies_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AvailableTechnologiesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tech-assessments/{technology}/{proficiency}": {
      "get": {
        "tags": [
          "tech-assessments"
        ],
        "summary": "Get Tech Assessment",
        "description": "获取技术栈能力测验题目（混合级别抽选20题）\n\n根据用户能力级别，从3个级别的题库中按不同比例随机抽选题目：\n- Beginner: 14道beginner, 4道intermediate, 2道expert（侧重基础）\n- Intermediate: 4道beginner, 12道intermediate, 4道expert（均衡分布）\n- Expert: 2道beginner, 6道intermediate, 12道expert（侧重进阶）\n\nArgs:\n    technology: 技术栈名称 (python, react, java等)\n    proficiency: 能力级别 (beginner, intermediate, expert)\n    \nReturns:\n    包含20道题目的测验数据（不包含答案和解析）\n    \nRaises:\n    HTTPException: 404 - 测验不存在\n    HTTPException: 400 - 题库题目不足\n    \nExample:\n    GET /api/v1/tech-assessments/python/intermediate",
        "operationId": "get_tech_assessment_api_v1_tech_assessments__technology___proficiency__get",
        "parameters": [
          {
            "name": "technology",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Technology"
            }
          },
          {
            "name": "proficiency",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Proficiency"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssessmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tech-assessments/{technology}/{proficiency}/evaluate": {
      "post": {
        "tags": [
          "tech-assessments"
        ],
        "summary": "Evaluate Assessment",
        "description": "评估测验结果（支持混合级别题目）\n\n从缓存中获取用户的测验题目（包含答案），进行评估。\n\n计算加权分数：\n- Beginner题: 1分\n- Intermediate题: 2分\n- Expert题: 3分\n\n判定逻辑：\n- ≥80%: confirmed - 确认当前级别\n- 60-79%: adjust - 建议保持当前级别\n- <60%: downgrade - 建议降低级别\n\nArgs:\n    technology: 技术栈名称\n    proficiency: 能力级别\n    request: 包含测验ID和用户答案的请求\n    \nReturns:\n    评估结果，包括得分、正确率和建议\n    \nRaises:\n    HTTPException: 404 - 测验会话不存在或已过期\n    HTTPException: 400 - 答案数量与题目数量不匹配\n    \nExample:\n    POST /api/v1/tech-assessments/python/intermediate/evaluate\n    {\n        \"assessment_id\": \"uuid\",\n        \"answers\": [\"选项A\", \"选项B\", ...]\n    }",
        "operationId": "evaluate_assessment_api_v1_tech_assessments__technology___proficiency__evaluate_post",
        "parameters": [
          {
            "name": "technology",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Technology"
            }
          },
          {
            "name": "proficiency",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Proficiency"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EvaluateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EvaluationResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tech-assessments/{technology}/{proficiency}/analyze": {
      "post": {
        "tags": [
          "tech-assessments"
        ],
        "summary": "Analyze Capability",
        "description": "分析用户的技术栈能力（支持混合级别题目）\n\n基于LLM深度分析用户的答题情况，重点关注错题，提供：\n- 整体能力评价\n- 优势和薄弱点分析\n- 知识缺口识别\n- 个性化学习建议\n- 能力级别验证\n\nArgs:\n    technology: 技术栈名称\n    proficiency: 能力级别\n    request: 包含测验ID、用户ID、答案列表和是否保存到画像的标志\n    \nReturns:\n    详细的能力分析结果\n    \nRaises:\n    HTTPException: 404 - 测验会话不存在或已过期\n    HTTPException: 400 - 答案数量不匹配\n    HTTPException: 500 - 分析失败\n    \nExample:\n    POST /api/v1/tech-assessments/python/intermediate/analyze\n    {\n        \"user_id\": \"user123\",\n        \"assessment_id\": \"uuid\",\n        \"answers\": [\"选项A\", \"选项B\", ...],\n        \"save_to_profile\": true\n    }",
        "operationId": "analyze_capability_api_v1_tech_assessments__technology___proficiency__analyze_post",
        "parameters": [
          {
            "name": "technology",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Technology"
            }
          },
          {
            "name": "proficiency",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Proficiency"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyzeCapabilityRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CapabilityAnalysisResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tech-assessments/custom": {
      "post": {
        "tags": [
          "tech-assessments"
        ],
        "summary": "Get Custom Tech Assessment",
        "description": "获取自定义技术栈测验\n\n- 检查数据库是否已存在该技术栈的所有级别题库\n- 如果不存在，后台生成题库（3个级别）\n- 如果已存在，直接返回题目\n\nArgs:\n    request: 包含技术栈名称和能力级别\n    background_tasks: FastAPI 后台任务\n    db: 数据库会话\n    \nReturns:\n    生成状态或测验题目\n    \nExample:\n    POST /api/v1/tech-assessments/custom\n    {\n        \"technology\": \"hive\",\n        \"proficiency\": \"intermediate\"\n    }",
        "operationId": "get_custom_tech_assessment_api_v1_tech_assessments_custom_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CustomTechAssessmentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomAssessmentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/featured/roadmaps": {
      "get": {
        "tags": [
          "featured"
        ],
        "summary": "Get Featured Roadmaps",
        "description": "获取精选路线图列表\n\n从配置的Featured User (admin@example.com) 获取已完成的路线图，\n用于首页Featured Roadmaps模块展示。\n\nArgs:\n    limit: 返回数量限制（默认50）\n    offset: 分页偏移（默认0）\n    db: 数据库会话\n    \nReturns:\n    精选路线图列表（只包含已完成且未删除的路线图）\n    \nRaises:\n    HTTPException: 404 - Featured用户不存在\n    \nExample:\n    ```json\n    {\n        \"roadmaps\": [\n            {\n                \"roadmap_id\": \"roadmap-001\",\n                \"title\": \"Python Web Development\",\n                \"created_at\": \"2024-01-01T00:00:00\",\n                \"total_concepts\": 28,\n                \"completed_concepts\": 0,\n                \"topic\": \"python web\",\n                \"status\": \"completed\"\n            }\n        ],\n        \"total\": 1,\n        \"featured_user_id\": \"user-001\",\n        \"featured_user_email\": \"admin@example.com\"\n    }\n    ```",
        "operationId": "get_featured_roadmaps_api_v1_featured_roadmaps_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeaturedRoadmapsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/active-retry-task": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Get Roadmap Active Retry Task",
        "description": "获取路线图当前正在进行的重试任务\n\n用于前端检测是否有正在进行的重试任务：\n- 用户切换 tab 返回时，检查是否有正在进行的重试任务\n- 如果有，前端可以用返回的 task_id 重新订阅 WebSocket\n\nArgs:\n    roadmap_id: 路线图 ID\n    \nReturns:\n    正在进行的重试任务信息，包含：\n    - has_active_retry_task: 是否有正在进行的重试任务\n    - task_id: 重试任务 ID（用于 WebSocket 订阅）\n    - current_step: 当前执行步骤\n    - items_to_retry: 正在重试的内容类型及数量\n    - created_at: 任务创建时间",
        "operationId": "get_roadmap_active_retry_task_api_v1_roadmaps__roadmap_id__active_retry_task_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/status-check": {
      "get": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Check Roadmap Status Quick",
        "description": "快速检查路线图状态，用于检测僵尸状态\n\n检测逻辑：\n1. 获取路线图的 task_id\n2. 检查任务是否还在运行\n3. 如果任务不在运行，但概念状态为 pending/generating，则为僵尸状态\n\nArgs:\n    roadmap_id: 路线图 ID\n    \nReturns:\n    {\n        \"roadmap_id\": str,\n        \"has_active_task\": bool,\n        \"task_status\": str | None,\n        \"stale_concepts\": [\n            {\n                \"concept_id\": str,\n                \"concept_name\": str,\n                \"content_type\": \"tutorial\" | \"resources\" | \"quiz\",\n                \"current_status\": \"pending\" | \"generating\"\n            }\n        ]\n    }",
        "operationId": "check_roadmap_status_quick_api_v1_roadmaps__roadmap_id__status_check_get",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/generate-stream": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Generate Roadmap Stream",
        "description": "流式生成学习路线图\n\n使用 Server-Sent Events (SSE) 实时推送生成过程。\n\nArgs:\n    request: 用户请求\n    include_tutorials: 是否包含教程生成阶段（默认 False）\n    \nReturns:\n    Server-Sent Events 流\n    \nEvent 格式：\n    需求分析和框架设计阶段：\n    - chunk: {\"type\": \"chunk\", \"content\": \"...\", \"agent\": \"...\"}\n    - complete: {\"type\": \"complete\", \"data\": {...}, \"agent\": \"...\"}\n    \n    教程生成阶段（当 include_tutorials=True）：\n    - tutorials_start: {\"type\": \"tutorials_start\", \"total_count\": N}\n    - batch_start: {\"type\": \"batch_start\", \"batch_index\": 1, \"batch_size\": 2, ...}\n    - tutorial_start: {\"type\": \"tutorial_start\", \"concept_id\": \"...\", \"concept_name\": \"...\"}\n    - tutorial_chunk: {\"type\": \"tutorial_chunk\", \"concept_id\": \"...\", \"content\": \"...\"}\n    - tutorial_complete: {\"type\": \"tutorial_complete\", \"concept_id\": \"...\", \"data\": {...}}\n    - tutorial_error: {\"type\": \"tutorial_error\", \"concept_id\": \"...\", \"error\": \"...\"}\n    - batch_complete: {\"type\": \"batch_complete\", \"batch_index\": 1, \"progress\": {...}}\n    - tutorials_done: {\"type\": \"tutorials_done\", \"summary\": {...}}\n    \n    完成：\n    - done: {\"type\": \"done\", \"summary\": {...}}\n    - error: {\"type\": \"error\", \"message\": \"...\", \"agent\": \"...\"}",
        "operationId": "generate_roadmap_stream_api_v1_roadmaps_generate_stream_post",
        "parameters": [
          {
            "name": "include_tutorials",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Tutorials"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/generate-full-stream": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Generate Full Roadmap Stream",
        "description": "完整流式生成学习路线图（包含教程生成）\n\n这是 /generate-stream?include_tutorials=true 的便捷端点。\n使用 Server-Sent Events (SSE) 实时推送整个生成过程。\n\n流程：需求分析 → 框架设计 → 批次教程生成\n\nArgs:\n    request: 用户请求\n    \nReturns:\n    Server-Sent Events 流（包含所有阶段）",
        "operationId": "generate_full_roadmap_stream_api_v1_roadmaps_generate_full_stream_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/resources/regenerate": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Regenerate Resources",
        "description": "重新生成指定概念的学习资源\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    request: 包含用户 ID 和学习偏好\n    \nReturns:\n    新生成的资源推荐",
        "operationId": "regenerate_resources_api_v1_roadmaps__roadmap_id__concepts__concept_id__resources_regenerate_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateTutorialRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/concepts/{concept_id}/quiz/regenerate": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Regenerate Quiz",
        "description": "重新生成指定概念的测验\n\nArgs:\n    roadmap_id: 路线图 ID\n    concept_id: 概念 ID\n    request: 包含用户 ID 和学习偏好\n    \nReturns:\n    新生成的测验",
        "operationId": "regenerate_quiz_api_v1_roadmaps__roadmap_id__concepts__concept_id__quiz_regenerate_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "concept_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Concept Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateTutorialRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/chat-stream": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Chat Modification Stream",
        "description": "聊天式修改入口（流式返回）\n\n分析用户自然语言修改意见 → 执行修改 → 流式返回结果\n\nArgs:\n    roadmap_id: 路线图 ID\n    request: 聊天修改请求（包含用户消息、上下文、偏好）\n    \nReturns:\n    Server-Sent Events 流\n    \nEvent 类型：\n    - analyzing: 正在分析意图\n    - intents: 检测到的修改意图列表\n    - modifying: 正在执行某项修改\n    - result: 单个修改完成\n    - done: 全部完成 + 汇总\n    - error: 错误信息",
        "operationId": "chat_modification_stream_api_v1_roadmaps__roadmap_id__chat_stream_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatModificationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/restore": {
      "post": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Restore Roadmap",
        "description": "从回收站恢复路线图\n\nArgs:\n    roadmap_id: 路线图 ID\n    user_id: 用户 ID（用于权限验证）\n    \nReturns:\n    恢复结果\n    \nRaises:\n    HTTPException: 如果路线图不存在或无权限",
        "operationId": "restore_roadmap_api_v1_roadmaps__roadmap_id__restore_post",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/roadmaps/{roadmap_id}/permanent": {
      "delete": {
        "tags": [
          "roadmaps"
        ],
        "summary": "Permanent Delete Roadmap",
        "description": "永久删除路线图（不可恢复）\n\n警告：此操作会从数据库中永久删除路线图及所有关联数据\n\nArgs:\n    roadmap_id: 路线图 ID\n    user_id: 用户 ID（用于权限验证）\n    \nReturns:\n    删除结果\n    \nRaises:\n    HTTPException: 如果路线图不存在或无权限",
        "operationId": "permanent_delete_roadmap_api_v1_roadmaps__roadmap_id__permanent_delete",
        "parameters": [
          {
            "name": "roadmap_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Roadmap Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/profile": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Get User Profile",
        "description": "获取用户画像\n\nArgs:\n    user_id: 用户 ID\n    \nReturns:\n    用户画像数据，如果不存在则返回默认值",
        "operationId": "get_user_profile_api_v1_users__user_id__profile_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "users"
        ],
        "summary": "Save User Profile",
        "description": "保存或更新用户画像\n\nArgs:\n    user_id: 用户 ID\n    request: 用户画像数据\n    \nReturns:\n    保存后的用户画像",
        "operationId": "save_user_profile_api_v1_users__user_id__profile_put",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/roadmaps": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Get User Roadmaps",
        "description": "获取用户的路线图列表（只包括已生成完成的路线图）\n\nArgs:\n    user_id: 用户 ID\n    limit: 返回数量限制（默认50）\n    offset: 分页偏移（默认0）\n    \nReturns:\n    用户的路线图列表（从 roadmap_metadata 表查询）\n    \nNote:\n    学习进度从 concept_progress 表获取，而不是 content_status 字段。\n    content_status 表示内容生成状态，concept_progress 表示用户学习进度。",
        "operationId": "get_user_roadmaps_api_v1_users__user_id__roadmaps_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoadmapHistoryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/roadmaps/trash": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Get Deleted Roadmaps",
        "description": "获取用户回收站中的路线图列表\n\nArgs:\n    user_id: 用户 ID\n    limit: 返回数量限制（默认50）\n    offset: 分页偏移（默认0）\n    \nReturns:\n    回收站中的路线图列表，按删除时间降序排列",
        "operationId": "get_deleted_roadmaps_api_v1_users__user_id__roadmaps_trash_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoadmapHistoryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/tasks": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Get User Tasks",
        "description": "获取用户的任务列表，支持按状态和任务类型筛选\n\nArgs:\n    user_id: 用户 ID\n    status: 任务状态筛选（可选）\n    task_type: 任务类型筛选（可选）：creation, retry_tutorial, retry_resources, retry_quiz, retry_batch\n    limit: 返回数量限制（默认50）\n    offset: 分页偏移（默认0）\n    \nReturns:\n    任务列表及各状态统计",
        "operationId": "get_user_tasks_api_v1_users__user_id__tasks_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "task_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Task Type"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/intent-analysis/{task_id}": {
      "get": {
        "tags": [
          "intent-analysis"
        ],
        "summary": "Get Intent Analysis",
        "description": "获取指定 task_id 的需求分析元数据\n\nArgs:\n    task_id: 任务 ID\n    \nReturns:\n    需求分析元数据\n    \nRaises:\n    HTTPException: 404 - 需求分析元数据不存在",
        "operationId": "get_intent_analysis_api_v1_intent_analysis__task_id__get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IntentAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/trace/{task_id}/logs": {
      "get": {
        "tags": [
          "trace"
        ],
        "summary": "Get Trace Logs",
        "description": "获取指定 task_id 的执行日志\n\nArgs:\n    task_id: 追踪 ID（通常等于 task_id）\n    level: 过滤日志级别（debug, info, warning, error）\n    category: 过滤日志分类（workflow, agent, tool, database）\n    limit: 返回数量限制（默认 100，最大 2000）\n    offset: 分页偏移\n    \nReturns:\n    执行日志列表",
        "operationId": "get_trace_logs_api_v1_trace__task_id__logs_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          },
          {
            "name": "level",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Level"
            }
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExecutionLogListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/trace/{task_id}/summary": {
      "get": {
        "tags": [
          "trace"
        ],
        "summary": "Get Trace Summary",
        "description": "获取指定 task_id 的执行摘要\n\nArgs:\n    task_id: 追踪 ID\n    \nReturns:\n    执行摘要统计",
        "operationId": "get_trace_summary_api_v1_trace__task_id__summary_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TraceSummaryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/trace/{task_id}/errors": {
      "get": {
        "tags": [
          "trace"
        ],
        "summary": "Get Trace Errors",
        "description": "获取指定 task_id 的错误日志\n\nArgs:\n    task_id: 追踪 ID\n    limit: 返回数量限制（默认 50）\n    \nReturns:\n    错误日志列表",
        "operationId": "get_trace_errors_api_v1_trace__task_id__errors_get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExecutionLogListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/waitlist": {
      "post": {
        "tags": [
          "waitlist"
        ],
        "summary": "Join Waitlist",
        "description": "加入候补名单\n\n用户在首页提交邮箱后调用此接口，将邮箱存入候补名单。\n如果邮箱已存在，返回成功但标记为非新用户。\n\nArgs:\n    request: 包含邮箱和来源的请求体\n    db: 数据库会话\n    \nReturns:\n    加入结果，包含成功标志和是否为新用户",
        "operationId": "join_waitlist_api_v1_waitlist_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WaitlistJoinRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WaitlistJoinResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/waitlist/count": {
      "get": {
        "tags": [
          "waitlist"
        ],
        "summary": "Get Waitlist Count",
        "description": "获取候补名单人数（仅供管理员查看）\n\nReturns:\n    候补名单统计信息",
        "operationId": "get_waitlist_count_api_v1_waitlist_count_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/jwt/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Auth:Jwt.Login",
        "operationId": "auth_jwt_login_api_v1_auth_jwt_login_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_auth_jwt_login_api_v1_auth_jwt_login_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BearerResponse"
                },
                "example": {
                  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoiOTIyMWZmYzktNjQwZi00MzcyLTg2ZDMtY2U2NDJjYmE1NjAzIiwiYXVkIjoiZmFzdGFwaS11c2VyczphdXRoIiwiZXhwIjoxNTcxNTA0MTkzfQ.M10bjOe45I5Ncu_uXvOmVV8QxnL-nZfcH96U90JaocI",
                  "token_type": "bearer"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorModel"
                },
                "examples": {
                  "LOGIN_BAD_CREDENTIALS": {
                    "summary": "Bad credentials or the user is inactive.",
                    "value": {
                      "detail": "LOGIN_BAD_CREDENTIALS"
                    }
                  },
                  "LOGIN_USER_NOT_VERIFIED": {
                    "summary": "The user is not verified.",
                    "value": {
                      "detail": "LOGIN_USER_NOT_VERIFIED"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/jwt/logout": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Auth:Jwt.Logout",
        "operationId": "auth_jwt_logout_api_v1_auth_jwt_logout_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "401": {
            "description": "Missing token or inactive user."
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Users:Current User",
        "operationId": "users_current_user_api_v1_users_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRead"
                }
              }
            }
          },
          "401": {
            "description": "Missing token or inactive user."
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "users"
        ],
        "summary": "Users:Patch Current User",
        "operationId": "users_patch_current_user_api_v1_users_me_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRead"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorModel"
                },
                "examples": {
                  "UPDATE_USER_EMAIL_ALREADY_EXISTS": {
                    "summary": "A user with this email already exists.",
                    "value": {
                      "detail": "UPDATE_USER_EMAIL_ALREADY_EXISTS"
                    }
                  },
                  "UPDATE_USER_INVALID_PASSWORD": {
                    "summary": "Password validation failed.",
                    "value": {
                      "detail": {
                        "code": "UPDATE_USER_INVALID_PASSWORD",
                        "reason": "Password should beat least 3 characters"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing token or inactive user."
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/users/{id}": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Users:User",
        "operationId": "users_user_api_v1_users__id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRead"
                }
              }
            }
          },
          "401": {
            "description": "Missing token or inactive user."
          },
          "403": {
            "description": "Not a superuser."
          },
          "404": {
            "description": "The user does not exist."
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "users"
        ],
        "summary": "Users:Patch User",
        "operationId": "users_patch_user_api_v1_users__id__patch",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRead"
                }
              }
            }
          },
          "400": {
            "content": {
              "application/json": {
                "examples": {
                  "UPDATE_USER_EMAIL_ALREADY_EXISTS": {
                    "summary": "A user with this email already exists.",
                    "value": {
                      "detail": "UPDATE_USER_EMAIL_ALREADY_EXISTS"
                    }
                  },
                  "UPDATE_USER_INVALID_PASSWORD": {
                    "summary": "Password validation failed.",
                    "value": {
                      "detail": {
                        "code": "UPDATE_USER_INVALID_PASSWORD",
                        "reason": "Password should beat least 3 characters"
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/ErrorModel"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "description": "Missing token or inactive user."
          },
          "403": {
            "description": "Not a superuser."
          },
          "404": {
            "description": "The user does not exist."
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "users"
        ],
        "summary": "Users:Delete User",
        "operationId": "users_delete_user_api_v1_users__id__delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "401": {
            "description": "Missing token or inactive user."
          },
          "403": {
            "description": "Not a superuser."
          },
          "404": {
            "description": "The user does not exist."
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/invite-user": {
      "post": {
        "tags": [
          "admin"
        ],
        "summary": "Invite User",
        "description": "邀请 Waitlist 用户\n\n为指定邮箱创建用户账号，生成临时密码。\n只有超级管理员可以调用此接口。\n\n注意：\n- 临时密码仅返回一次，请妥善保存并发送给用户\n- 密码会在指定天数后过期\n- 如果用户已存在，会返回错误\n\nArgs:\n    request: 邀请请求，包含邮箱和密码有效期\n    \nReturns:\n    邀请结果，包含临时密码",
        "operationId": "invite_user_api_v1_admin_invite_user_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InviteUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InviteUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/waitlist": {
      "get": {
        "tags": [
          "admin"
        ],
        "summary": "Get Waitlist",
        "description": "获取 Waitlist 用户列表\n\n只有超级管理员可以查看。\n\nArgs:\n    limit: 每页数量\n    offset: 偏移量\n    pending_only: 是否只显示未邀请的用户\n    \nReturns:\n    Waitlist 用户列表和统计信息",
        "operationId": "get_waitlist_api_v1_admin_waitlist_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "pending_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Pending Only"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WaitlistResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/create-superuser": {
      "post": {
        "tags": [
          "admin"
        ],
        "summary": "Create Initial Superuser",
        "description": "创建初始超级管理员（仅在没有超级管理员时可用）\n\n这是一个初始化端点，只有当系统中没有超级管理员时才能调用。\n创建第一个超级管理员后，此端点将返回错误。\n\nArgs:\n    email: 管理员邮箱\n    password: 管理员密码\n    \nReturns:\n    创建结果",
        "operationId": "create_initial_superuser_api_v1_admin_create_superuser_post",
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "email",
              "title": "Email"
            }
          },
          {
            "name": "password",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Password"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "健康检查端点",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AnalyzeCapabilityRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户ID"
          },
          "assessment_id": {
            "type": "string",
            "title": "Assessment Id",
            "description": "测验ID"
          },
          "answers": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Answers",
            "description": "用户的答案列表（按题目顺序）"
          },
          "save_to_profile": {
            "type": "boolean",
            "title": "Save To Profile",
            "description": "是否保存到用户画像",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "assessment_id",
          "answers"
        ],
        "title": "AnalyzeCapabilityRequest",
        "description": "能力分析请求模型"
      },
      "AssessmentResponse": {
        "properties": {
          "assessment_id": {
            "type": "string",
            "title": "Assessment Id"
          },
          "technology": {
            "type": "string",
            "title": "Technology"
          },
          "proficiency_level": {
            "type": "string",
            "title": "Proficiency Level"
          },
          "questions": {
            "items": {
              "$ref": "#/components/schemas/QuestionResponse"
            },
            "type": "array",
            "title": "Questions"
          },
          "total_questions": {
            "type": "integer",
            "title": "Total Questions"
          }
        },
        "type": "object",
        "required": [
          "assessment_id",
          "technology",
          "proficiency_level",
          "questions",
          "total_questions"
        ],
        "title": "AssessmentResponse",
        "description": "测验响应模型"
      },
      "AvailableTechnologiesResponse": {
        "properties": {
          "technologies": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Technologies",
            "description": "技术栈名称列表"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "技术栈总数"
          }
        },
        "type": "object",
        "required": [
          "technologies",
          "count"
        ],
        "title": "AvailableTechnologiesResponse",
        "description": "可用技术栈列表响应模型"
      },
      "BearerResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "token_type"
        ],
        "title": "BearerResponse"
      },
      "Body_auth_jwt_login_api_v1_auth_jwt_login_post": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^password$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "format": "password",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "format": "password",
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_auth_jwt_login_api_v1_auth_jwt_login_post"
      },
      "CapabilityAnalysisResult": {
        "properties": {
          "technology": {
            "type": "string",
            "title": "Technology",
            "description": "技术栈名称"
          },
          "proficiency_level": {
            "type": "string",
            "title": "Proficiency Level",
            "description": "声称的能力级别"
          },
          "overall_assessment": {
            "type": "string",
            "title": "Overall Assessment",
            "description": "整体评价"
          },
          "strengths": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Strengths",
            "description": "优势领域列表"
          },
          "weaknesses": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Weaknesses",
            "description": "薄弱点列表"
          },
          "knowledge_gaps": {
            "items": {
              "$ref": "#/components/schemas/KnowledgeGap"
            },
            "type": "array",
            "title": "Knowledge Gaps",
            "description": "知识缺口列表"
          },
          "learning_suggestions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Learning Suggestions",
            "description": "学习建议列表"
          },
          "proficiency_verification": {
            "$ref": "#/components/schemas/ProficiencyVerification",
            "description": "能力级别验证"
          },
          "score_breakdown": {
            "additionalProperties": {
              "$ref": "#/components/schemas/ScoreBreakdownItem"
            },
            "type": "object",
            "title": "Score Breakdown",
            "description": "各难度得分情况"
          }
        },
        "type": "object",
        "required": [
          "technology",
          "proficiency_level",
          "overall_assessment",
          "strengths",
          "weaknesses",
          "knowledge_gaps",
          "learning_suggestions",
          "proficiency_verification",
          "score_breakdown"
        ],
        "title": "CapabilityAnalysisResult",
        "description": "能力分析结果模型"
      },
      "ChatMessageRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户 ID"
          },
          "roadmap_id": {
            "type": "string",
            "title": "Roadmap Id",
            "description": "路线图 ID"
          },
          "concept_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Concept Id",
            "description": "当前学习的概念 ID"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "用户消息内容"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "会话 ID（新会话时为空）"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "roadmap_id",
          "message"
        ],
        "title": "ChatMessageRequest",
        "description": "聊天消息请求"
      },
      "ChatModificationRequest": {
        "properties": {
          "user_message": {
            "type": "string",
            "title": "User Message",
            "description": "用户的自然语言修改意见"
          },
          "context": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "当前上下文（如正在查看的 concept_id）"
          },
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户 ID"
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          }
        },
        "type": "object",
        "required": [
          "user_message",
          "user_id",
          "preferences"
        ],
        "title": "ChatModificationRequest",
        "description": "聊天修改请求"
      },
      "ConceptProgressResponse": {
        "properties": {
          "concept_id": {
            "type": "string",
            "title": "Concept Id"
          },
          "is_completed": {
            "type": "boolean",
            "title": "Is Completed"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          }
        },
        "type": "object",
        "required": [
          "concept_id",
          "is_completed"
        ],
        "title": "ConceptProgressResponse",
        "description": "Concept 进度响应"
      },
      "ConceptProgressUpdate": {
        "properties": {
          "is_completed": {
            "type": "boolean",
            "title": "Is Completed",
            "description": "是否完成"
          }
        },
        "type": "object",
        "required": [
          "is_completed"
        ],
        "title": "ConceptProgressUpdate",
        "description": "标记/取消 Concept 完成状态请求"
      },
      "CustomAssessmentResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "generation_started | ready"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "assessment": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AssessmentResponse"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "status",
          "message"
        ],
        "title": "CustomAssessmentResponse",
        "description": "自定义测验响应模型"
      },
      "CustomTechAssessmentRequest": {
        "properties": {
          "technology": {
            "type": "string",
            "title": "Technology",
            "description": "自定义技术栈名称"
          },
          "proficiency": {
            "type": "string",
            "title": "Proficiency",
            "description": "能力级别"
          }
        },
        "type": "object",
        "required": [
          "technology",
          "proficiency"
        ],
        "title": "CustomTechAssessmentRequest",
        "description": "自定义技能测验请求模型"
      },
      "ErrorModel": {
        "properties": {
          "detail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              }
            ],
            "title": "Detail"
          }
        },
        "type": "object",
        "required": [
          "detail"
        ],
        "title": "ErrorModel"
      },
      "EvaluateRequest": {
        "properties": {
          "assessment_id": {
            "type": "string",
            "title": "Assessment Id",
            "description": "测验ID（前端获取题目时返回的ID）"
          },
          "answers": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Answers",
            "description": "用户的答案列表（按题目顺序）"
          }
        },
        "type": "object",
        "required": [
          "assessment_id",
          "answers"
        ],
        "title": "EvaluateRequest",
        "description": "评估请求模型"
      },
      "EvaluationResult": {
        "properties": {
          "score": {
            "type": "integer",
            "title": "Score",
            "description": "得分"
          },
          "max_score": {
            "type": "integer",
            "title": "Max Score",
            "description": "总分"
          },
          "percentage": {
            "type": "number",
            "title": "Percentage",
            "description": "正确率百分比"
          },
          "correct_count": {
            "type": "integer",
            "title": "Correct Count",
            "description": "答对题数"
          },
          "total_questions": {
            "type": "integer",
            "title": "Total Questions",
            "description": "题目总数"
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation",
            "description": "建议: confirmed, adjust, downgrade"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "建议说明"
          }
        },
        "type": "object",
        "required": [
          "score",
          "max_score",
          "percentage",
          "correct_count",
          "total_questions",
          "recommendation",
          "message"
        ],
        "title": "EvaluationResult",
        "description": "评估结果模型"
      },
      "ExecutionLogListResponse": {
        "properties": {
          "logs": {
            "items": {
              "$ref": "#/components/schemas/ExecutionLogResponse"
            },
            "type": "array",
            "title": "Logs"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          }
        },
        "type": "object",
        "required": [
          "logs",
          "total",
          "offset",
          "limit"
        ],
        "title": "ExecutionLogListResponse",
        "description": "执行日志列表响应"
      },
      "ExecutionLogResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "roadmap_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Roadmap Id"
          },
          "concept_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Concept Id"
          },
          "level": {
            "type": "string",
            "title": "Level"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "step": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Step"
          },
          "agent_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Name"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details"
          },
          "duration_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Ms"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "task_id",
          "level",
          "category",
          "message",
          "created_at"
        ],
        "title": "ExecutionLogResponse",
        "description": "执行日志响应"
      },
      "FeaturedRoadmapItem": {
        "properties": {
          "roadmap_id": {
            "type": "string",
            "title": "Roadmap Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "total_concepts": {
            "type": "integer",
            "title": "Total Concepts"
          },
          "completed_concepts": {
            "type": "integer",
            "title": "Completed Concepts",
            "default": 0
          },
          "topic": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Topic"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "completed"
          }
        },
        "type": "object",
        "required": [
          "roadmap_id",
          "title",
          "created_at",
          "total_concepts"
        ],
        "title": "FeaturedRoadmapItem",
        "description": "精选路线图条目"
      },
      "FeaturedRoadmapsResponse": {
        "properties": {
          "roadmaps": {
            "items": {
              "$ref": "#/components/schemas/FeaturedRoadmapItem"
            },
            "type": "array",
            "title": "Roadmaps"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "featured_user_id": {
            "type": "string",
            "title": "Featured User Id"
          },
          "featured_user_email": {
            "type": "string",
            "title": "Featured User Email"
          }
        },
        "type": "object",
        "required": [
          "roadmaps",
          "total",
          "featured_user_id",
          "featured_user_email"
        ],
        "title": "FeaturedRoadmapsResponse",
        "description": "精选路线图列表响应"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "IntentAnalysisResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "roadmap_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Roadmap Id"
          },
          "parsed_goal": {
            "type": "string",
            "title": "Parsed Goal"
          },
          "key_technologies": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Key Technologies"
          },
          "difficulty_profile": {
            "type": "string",
            "title": "Difficulty Profile"
          },
          "time_constraint": {
            "type": "string",
            "title": "Time Constraint"
          },
          "recommended_focus": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommended Focus"
          },
          "user_profile_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Profile Summary"
          },
          "skill_gap_analysis": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Skill Gap Analysis"
          },
          "personalized_suggestions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Personalized Suggestions"
          },
          "estimated_learning_path_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Learning Path Type"
          },
          "content_format_weights": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Format Weights"
          },
          "language_preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Language Preferences"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "task_id",
          "parsed_goal",
          "key_technologies",
          "difficulty_profile",
          "time_constraint",
          "recommended_focus",
          "skill_gap_analysis",
          "personalized_suggestions"
        ],
        "title": "IntentAnalysisResponse",
        "description": "需求分析响应"
      },
      "InviteUserRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password_validity_days": {
            "type": "integer",
            "title": "Password Validity Days",
            "default": 30
          },
          "send_email": {
            "type": "boolean",
            "title": "Send Email",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "email"
        ],
        "title": "InviteUserRequest",
        "description": "邀请用户请求\n\nArgs:\n    email: 要邀请的用户邮箱\n    password_validity_days: 临时密码有效期（天），默认 30 天\n    send_email: 是否发送邀请邮件，默认 True"
      },
      "InviteUserResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "temp_password": {
            "type": "string",
            "title": "Temp Password"
          },
          "expires_at": {
            "type": "string",
            "title": "Expires At"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "email",
          "username",
          "temp_password",
          "expires_at",
          "message"
        ],
        "title": "InviteUserResponse",
        "description": "邀请用户响应\n\nArgs:\n    success: 是否成功\n    email: 用户邮箱\n    username: 生成的用户名\n    temp_password: 临时密码（仅返回一次，请妥善保存）\n    expires_at: 密码过期时间\n    message: 提示消息"
      },
      "KnowledgeGap": {
        "properties": {
          "topic": {
            "type": "string",
            "title": "Topic",
            "description": "主题名称"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "详细说明"
          },
          "priority": {
            "type": "string",
            "title": "Priority",
            "description": "优先级: high/medium/low"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "学习建议列表"
          }
        },
        "type": "object",
        "required": [
          "topic",
          "description",
          "priority",
          "recommendations"
        ],
        "title": "KnowledgeGap",
        "description": "知识缺口模型"
      },
      "LearningPreferences": {
        "properties": {
          "learning_goal": {
            "type": "string",
            "title": "Learning Goal",
            "description": "学习目标，如'成为全栈工程师'"
          },
          "available_hours_per_week": {
            "type": "integer",
            "maximum": 168,
            "minimum": 1,
            "title": "Available Hours Per Week",
            "description": "每周可投入小时数"
          },
          "motivation": {
            "type": "string",
            "title": "Motivation",
            "description": "学习动机，如'转行'、'升职'、'兴趣'"
          },
          "current_level": {
            "type": "string",
            "enum": [
              "beginner",
              "intermediate",
              "advanced"
            ],
            "title": "Current Level",
            "description": "当前掌握程度"
          },
          "career_background": {
            "type": "string",
            "title": "Career Background",
            "description": "职业背景，如'市场营销 5 年经验'"
          },
          "content_preference": {
            "items": {
              "type": "string",
              "enum": [
                "visual",
                "text",
                "audio",
                "hands_on"
              ]
            },
            "type": "array",
            "title": "Content Preference",
            "description": "偏好的内容类型",
            "default": [
              "visual",
              "text"
            ]
          },
          "target_deadline": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Deadline",
            "description": "期望完成时间"
          },
          "industry": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Industry",
            "description": "所属行业"
          },
          "current_role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Role",
            "description": "当前职位"
          },
          "tech_stack": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tech Stack",
            "description": "技术栈列表"
          },
          "preferred_language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferred Language",
            "description": "偏好的学习语言（向后兼容）"
          },
          "primary_language": {
            "type": "string",
            "title": "Primary Language",
            "description": "主要语言（教程、路线图语言）",
            "default": "zh"
          },
          "secondary_language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secondary Language",
            "description": "次要语言（资源推荐补充语言）"
          }
        },
        "type": "object",
        "required": [
          "learning_goal",
          "available_hours_per_week",
          "motivation",
          "current_level",
          "career_background"
        ],
        "title": "LearningPreferences",
        "description": "学习偏好配置"
      },
      "ProficiencyVerification": {
        "properties": {
          "claimed_level": {
            "type": "string",
            "title": "Claimed Level",
            "description": "声称的能力级别"
          },
          "verified_level": {
            "type": "string",
            "title": "Verified Level",
            "description": "验证的实际能力级别"
          },
          "confidence": {
            "type": "string",
            "title": "Confidence",
            "description": "置信度: high/medium/low"
          },
          "reasoning": {
            "type": "string",
            "title": "Reasoning",
            "description": "判定依据"
          }
        },
        "type": "object",
        "required": [
          "claimed_level",
          "verified_level",
          "confidence",
          "reasoning"
        ],
        "title": "ProficiencyVerification",
        "description": "能力级别验证模型"
      },
      "QuestionResponse": {
        "properties": {
          "question": {
            "type": "string",
            "title": "Question",
            "description": "题目内容"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "题目类型: single_choice, multiple_choice, true_false"
          },
          "options": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Options",
            "description": "选项列表"
          },
          "proficiency_level": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Proficiency Level",
            "description": "题目来源级别: beginner, intermediate, expert"
          }
        },
        "type": "object",
        "required": [
          "question",
          "type",
          "options"
        ],
        "title": "QuestionResponse",
        "description": "题目响应模型"
      },
      "QuizAttemptCreate": {
        "properties": {
          "quiz_id": {
            "type": "string",
            "title": "Quiz Id"
          },
          "total_questions": {
            "type": "integer",
            "title": "Total Questions"
          },
          "correct_answers": {
            "type": "integer",
            "title": "Correct Answers"
          },
          "score_percentage": {
            "type": "number",
            "title": "Score Percentage"
          },
          "incorrect_question_indices": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Incorrect Question Indices",
            "description": "答错题目的序号列表（从0开始，如 [0, 2, 5] 表示第1、3、6题答错）",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "quiz_id",
          "total_questions",
          "correct_answers",
          "score_percentage"
        ],
        "title": "QuizAttemptCreate",
        "description": "提交 Quiz 答题记录请求"
      },
      "QuizAttemptResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "quiz_id": {
            "type": "string",
            "title": "Quiz Id"
          },
          "concept_id": {
            "type": "string",
            "title": "Concept Id"
          },
          "total_questions": {
            "type": "integer",
            "title": "Total Questions"
          },
          "correct_answers": {
            "type": "integer",
            "title": "Correct Answers"
          },
          "score_percentage": {
            "type": "number",
            "title": "Score Percentage"
          },
          "incorrect_question_indices": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Incorrect Question Indices"
          },
          "attempted_at": {
            "type": "string",
            "format": "date-time",
            "title": "Attempted At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "quiz_id",
          "concept_id",
          "total_questions",
          "correct_answers",
          "score_percentage",
          "incorrect_question_indices",
          "attempted_at"
        ],
        "title": "QuizAttemptResponse",
        "description": "Quiz 答题记录响应"
      },
      "RegenerateContentRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户ID"
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "preferences"
        ],
        "title": "RegenerateContentRequest",
        "description": "重新生成内容请求"
      },
      "RegenerateTutorialRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户 ID"
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "preferences"
        ],
        "title": "RegenerateTutorialRequest",
        "description": "重新生成教程请求"
      },
      "RetryContentRequest": {
        "properties": {
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          }
        },
        "type": "object",
        "required": [
          "preferences"
        ],
        "title": "RetryContentRequest",
        "description": "单个概念内容重试请求"
      },
      "RetryContentResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "是否成功"
          },
          "concept_id": {
            "type": "string",
            "title": "Concept Id",
            "description": "概念 ID"
          },
          "content_type": {
            "type": "string",
            "enum": [
              "tutorial",
              "resources",
              "quiz"
            ],
            "title": "Content Type",
            "description": "内容类型"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "结果消息"
          },
          "data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "重试成功时返回的数据"
          }
        },
        "type": "object",
        "required": [
          "success",
          "concept_id",
          "content_type",
          "message"
        ],
        "title": "RetryContentResponse",
        "description": "单个概念内容重试响应"
      },
      "RoadmapHistoryItem": {
        "properties": {
          "roadmap_id": {
            "type": "string",
            "title": "Roadmap Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "total_concepts": {
            "type": "integer",
            "title": "Total Concepts"
          },
          "completed_concepts": {
            "type": "integer",
            "title": "Completed Concepts"
          },
          "topic": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Topic"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "task_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Task Id"
          },
          "task_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Task Status"
          },
          "current_step": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Step"
          },
          "deleted_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deleted At"
          },
          "deleted_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deleted By"
          }
        },
        "type": "object",
        "required": [
          "roadmap_id",
          "title",
          "created_at",
          "total_concepts",
          "completed_concepts"
        ],
        "title": "RoadmapHistoryItem",
        "description": "路线图历史项"
      },
      "RoadmapHistoryResponse": {
        "properties": {
          "roadmaps": {
            "items": {
              "$ref": "#/components/schemas/RoadmapHistoryItem"
            },
            "type": "array",
            "title": "Roadmaps"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "in_progress_count": {
            "type": "integer",
            "title": "In Progress Count",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "roadmaps",
          "total"
        ],
        "title": "RoadmapHistoryResponse",
        "description": "用户路线图历史响应"
      },
      "ScoreBreakdownItem": {
        "properties": {
          "correct": {
            "type": "integer",
            "title": "Correct",
            "description": "答对题数"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "总题数"
          },
          "percentage": {
            "type": "number",
            "title": "Percentage",
            "description": "正确率百分比"
          }
        },
        "type": "object",
        "required": [
          "correct",
          "total",
          "percentage"
        ],
        "title": "ScoreBreakdownItem",
        "description": "分数细分项"
      },
      "TaskListItem": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "current_step": {
            "type": "string",
            "title": "Current Step"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "roadmap_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Roadmap Id"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "status",
          "current_step",
          "title",
          "created_at",
          "updated_at"
        ],
        "title": "TaskListItem",
        "description": "任务列表项"
      },
      "TaskListResponse": {
        "properties": {
          "tasks": {
            "items": {
              "$ref": "#/components/schemas/TaskListItem"
            },
            "type": "array",
            "title": "Tasks"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "pending_count": {
            "type": "integer",
            "title": "Pending Count"
          },
          "processing_count": {
            "type": "integer",
            "title": "Processing Count"
          },
          "completed_count": {
            "type": "integer",
            "title": "Completed Count"
          },
          "failed_count": {
            "type": "integer",
            "title": "Failed Count"
          }
        },
        "type": "object",
        "required": [
          "tasks",
          "total",
          "pending_count",
          "processing_count",
          "completed_count",
          "failed_count"
        ],
        "title": "TaskListResponse",
        "description": "任务列表响应"
      },
      "TechStackItem": {
        "properties": {
          "technology": {
            "type": "string",
            "title": "Technology",
            "description": "技术名称"
          },
          "proficiency": {
            "type": "string",
            "title": "Proficiency",
            "description": "熟练程度: beginner, intermediate, expert"
          },
          "capability_analysis": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Capability Analysis",
            "description": "能力分析结果（可选）"
          }
        },
        "type": "object",
        "required": [
          "technology",
          "proficiency"
        ],
        "title": "TechStackItem",
        "description": "技术栈项"
      },
      "TraceSummaryResponse": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "level_stats": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Level Stats"
          },
          "category_stats": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Category Stats"
          },
          "total_duration_ms": {
            "type": "integer",
            "title": "Total Duration Ms"
          },
          "first_log_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "First Log At"
          },
          "last_log_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Log At"
          },
          "total_logs": {
            "type": "integer",
            "title": "Total Logs"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "level_stats",
          "category_stats",
          "total_duration_ms",
          "total_logs"
        ],
        "title": "TraceSummaryResponse",
        "description": "追踪摘要响应"
      },
      "UserProfileRequest": {
        "properties": {
          "industry": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Industry",
            "description": "所属行业"
          },
          "current_role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Role",
            "description": "当前职位"
          },
          "tech_stack": {
            "items": {
              "$ref": "#/components/schemas/TechStackItem"
            },
            "type": "array",
            "title": "Tech Stack",
            "description": "技术栈列表",
            "default": []
          },
          "primary_language": {
            "type": "string",
            "title": "Primary Language",
            "description": "主要语言",
            "default": "zh"
          },
          "secondary_language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secondary Language",
            "description": "次要语言"
          },
          "weekly_commitment_hours": {
            "type": "integer",
            "maximum": 168,
            "minimum": 1,
            "title": "Weekly Commitment Hours",
            "description": "每周学习时间",
            "default": 10
          },
          "learning_style": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Learning Style",
            "description": "学习风格: visual, text, audio, hands_on",
            "default": []
          },
          "ai_personalization": {
            "type": "boolean",
            "title": "Ai Personalization",
            "description": "是否启用 AI 个性化",
            "default": true
          }
        },
        "type": "object",
        "title": "UserProfileRequest",
        "description": "用户画像请求体"
      },
      "UserProfileResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "industry": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Industry"
          },
          "current_role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Role"
          },
          "tech_stack": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Tech Stack",
            "default": []
          },
          "primary_language": {
            "type": "string",
            "title": "Primary Language",
            "default": "zh"
          },
          "secondary_language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secondary Language"
          },
          "weekly_commitment_hours": {
            "type": "integer",
            "title": "Weekly Commitment Hours",
            "default": 10
          },
          "learning_style": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Learning Style",
            "default": []
          },
          "ai_personalization": {
            "type": "boolean",
            "title": "Ai Personalization",
            "default": true
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "UserProfileResponse",
        "description": "用户画像响应体"
      },
      "UserRead": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": true
          },
          "is_superuser": {
            "type": "boolean",
            "title": "Is Superuser",
            "default": false
          },
          "is_verified": {
            "type": "boolean",
            "title": "Is Verified",
            "default": false
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password_expires_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Password Expires At"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "username"
        ],
        "title": "UserRead",
        "description": "用户读取模式\n\n包含所有可对外展示的用户信息。"
      },
      "UserRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences"
          },
          "additional_context": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Additional Context",
            "description": "额外补充信息"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "session_id",
          "preferences"
        ],
        "title": "UserRequest",
        "description": "系统输入：用户请求"
      },
      "UserUpdate": {
        "properties": {
          "password": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Password"
          },
          "email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          },
          "is_superuser": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Superuser"
          },
          "is_verified": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Verified"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          }
        },
        "type": "object",
        "title": "UserUpdate",
        "description": "用户更新模式\n\n用户自行更新信息时的输入模式。"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WaitlistJoinRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "default": "landing_page"
          }
        },
        "type": "object",
        "required": [
          "email"
        ],
        "title": "WaitlistJoinRequest",
        "description": "加入候补名单请求\n\nArgs:\n    email: 用户邮箱地址\n    source: 来源标记（可选，默认为 landing_page）"
      },
      "WaitlistJoinResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "is_new": {
            "type": "boolean",
            "title": "Is New"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "is_new"
        ],
        "title": "WaitlistJoinResponse",
        "description": "加入候补名单响应\n\nArgs:\n    success: 是否成功\n    message: 提示消息\n    is_new: 是否为新用户（首次加入）"
      },
      "WaitlistResponse": {
        "properties": {
          "users": {
            "items": {
              "$ref": "#/components/schemas/WaitlistUserInfo"
            },
            "type": "array",
            "title": "Users"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "pending": {
            "type": "integer",
            "title": "Pending"
          },
          "invited": {
            "type": "integer",
            "title": "Invited"
          }
        },
        "type": "object",
        "required": [
          "users",
          "total",
          "pending",
          "invited"
        ],
        "title": "WaitlistResponse",
        "description": "Waitlist 列表响应\n\nArgs:\n    users: 用户列表\n    total: 总数\n    pending: 待邀请数\n    invited: 已邀请数"
      },
      "WaitlistUserInfo": {
        "properties": {
          "email": {
            "type": "string",
            "title": "Email"
          },
          "source": {
            "type": "string",
            "title": "Source"
          },
          "invited": {
            "type": "boolean",
            "title": "Invited"
          },
          "invited_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Invited At"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "email",
          "source",
          "invited",
          "created_at"
        ],
        "title": "WaitlistUserInfo",
        "description": "Waitlist 用户信息\n\nArgs:\n    email: 用户邮箱\n    source: 来源\n    invited: 是否已邀请\n    invited_at: 邀请时间\n    created_at: 加入时间"
      },
      "app__api__v1__endpoints__modification__ModifyContentRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户ID"
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          },
          "requirements": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "minItems": 1,
            "title": "Requirements",
            "description": "修改要求列表",
            "examples": [
              [
                "增加更多代码示例",
                "简化技术术语"
              ]
            ]
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "preferences",
          "requirements"
        ],
        "title": "ModifyContentRequest",
        "description": "修改内容请求"
      },
      "app__api__v1__endpoints__retry__RetryFailedRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户ID"
          },
          "content_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Types",
            "description": "要重试的内容类型列表",
            "default": [
              "tutorial",
              "resources",
              "quiz"
            ]
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "preferences"
        ],
        "title": "RetryFailedRequest",
        "description": "重试失败内容请求"
      },
      "app__api__v1__roadmap__ModifyContentRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户 ID"
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          },
          "requirements": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Requirements",
            "description": "具体修改要求列表"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "preferences",
          "requirements"
        ],
        "title": "ModifyContentRequest",
        "description": "内容修改请求"
      },
      "app__api__v1__roadmap__RetryFailedRequest": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id",
            "description": "用户 ID"
          },
          "preferences": {
            "$ref": "#/components/schemas/LearningPreferences",
            "description": "用户学习偏好"
          },
          "content_types": {
            "items": {
              "type": "string",
              "enum": [
                "tutorial",
                "resources",
                "quiz"
              ]
            },
            "type": "array",
            "title": "Content Types",
            "description": "要重试的内容类型列表",
            "default": [
              "tutorial",
              "resources",
              "quiz"
            ]
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "preferences"
        ],
        "title": "RetryFailedRequest",
        "description": "断点续传请求"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "flows": {
          "password": {
            "scopes": {},
            "tokenUrl": "api/v1/auth/jwt/login"
          }
        }
      }
    }
  }
}