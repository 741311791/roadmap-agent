# ğŸ§ª è®¤è¯æµç¨‹æµ‹è¯•éªŒè¯

**æ—¥æœŸ**: 2025-12-06  
**çŠ¶æ€**: âœ… Ready for User Testing

---

## ğŸ“‹ æµ‹è¯•å‡†å¤‡

### 1. æ¸…é™¤å½“å‰ç™»å½•çŠ¶æ€

åœ¨æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰è¿è¡Œï¼š

```javascript
// æ¸…é™¤æ‰€æœ‰å­˜å‚¨
localStorage.clear();
sessionStorage.clear();

// åˆ·æ–°é¡µé¢
location.reload();
```

**æˆ–è€…** ä½¿ç”¨æµè§ˆå™¨çš„éšç§æ¨¡å¼/æ— ç—•æ¨¡å¼è®¿é—®åº”ç”¨ã€‚

---

## ğŸ¯ æµ‹è¯•åœºæ™¯

### âœ… åœºæ™¯ 1: é¦–æ¬¡è®¿é—® - æœªç™»å½•çŠ¶æ€

**ç›®æ ‡**: éªŒè¯æœªç™»å½•ç”¨æˆ·ä¼šçœ‹åˆ°ç™»å½•é¡µé¢

**æ­¥éª¤**:
1. ç¡®ä¿å·²æ¸…é™¤ localStorageï¼ˆå‚è€ƒä¸Šé¢çš„å‡†å¤‡æ­¥éª¤ï¼‰
2. è®¿é—®: http://localhost:3000
3. è§‚å¯Ÿé¡µé¢è¡Œä¸º

**é¢„æœŸç»“æœ**:
- âœ… è‡ªåŠ¨è·³è½¬åˆ° `/login` é¡µé¢
- âœ… çœ‹åˆ°æ¬¢è¿æ ‡é¢˜ "Welcome to Muset"
- âœ… çœ‹åˆ° 4 ä¸ªæµ‹è¯•è´¦å·å¡ç‰‡ï¼š
  - ğŸ‘¨â€ğŸ’¼ Admin User (å¸¦ "ğŸ‘‘ Admin" æ ‡ç­¾)
  - ğŸ‘¤ Test User 1
  - ğŸ‘¨ Test User 2
  - ğŸ‘© Test User 3
- âœ… æ¯ä¸ªå¡ç‰‡æ˜¾ç¤ºå¤´åƒã€ç”¨æˆ·åå’Œé‚®ç®±
- âœ… åº•éƒ¨æ˜¾ç¤ºè“è‰²æç¤ºæ¡†ï¼š"This is a temporary development login"

**æ§åˆ¶å°æ—¥å¿—**:
```
[AuthGuard] Checking auth for path: /
[AuthGuard] isPublicRoute: false, isAuthenticated: false
[AuthGuard] âŒ Unauthorized access, redirecting to login
[AuthGuard] Public route, rendering directly
```

---

### âœ… åœºæ™¯ 2: é€‰æ‹©è´¦å·ç™»å½•

**ç›®æ ‡**: éªŒè¯ç™»å½•æµç¨‹æ­£å¸¸å·¥ä½œ

**æ­¥éª¤**:
1. åœ¨ç™»å½•é¡µé¢ç‚¹å‡» "Admin User" å¡ç‰‡
2. è§‚å¯Ÿç™»å½•åŠ¨ç”»å’Œè·³è½¬

**é¢„æœŸç»“æœ**:
- âœ… ç‚¹å‡»åæŒ‰é’®æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼ˆæ—‹è½¬çš„åœ†åœˆï¼‰
- âœ… 0.5ç§’åè·³è½¬åˆ° `/home` é¡µé¢
- âœ… home é¡µé¢æ­£å¸¸æ˜¾ç¤º
- âœ… å·¦ä¾§è¾¹æ åº•éƒ¨æ˜¾ç¤ºç”¨æˆ·å¤´åƒå’Œåç§°
- âœ… åˆ·æ–°é¡µé¢åä»ä¿æŒç™»å½•çŠ¶æ€

**æ§åˆ¶å°æ—¥å¿—**:
```
[Login] Login successful, redirecting to: /home
[AuthStore] User logged in: Admin User
[AuthGuard] Checking auth for path: /home
[AuthGuard] isPublicRoute: false, isAuthenticated: true
[AuthGuard] âœ… Access granted
```

---

### âœ… åœºæ™¯ 3: å·²ç™»å½•ç”¨æˆ·è®¿é—®ç™»å½•é¡µ

**ç›®æ ‡**: éªŒè¯å·²ç™»å½•ç”¨æˆ·çœ‹åˆ°å‹å¥½æç¤º

**æ­¥éª¤**:
1. ç¡®ä¿å·²ç™»å½•ï¼ˆå®Œæˆåœºæ™¯ 2ï¼‰
2. è®¿é—®: http://localhost:3000/login
3. è§‚å¯Ÿé¡µé¢æ˜¾ç¤º

**é¢„æœŸç»“æœ**:
- âœ… çœ‹åˆ°å¤§çš„ç»¿è‰² "âœ…" å›¾æ ‡
- âœ… æ ‡é¢˜æ˜¾ç¤º "Already Logged In"
- âœ… æ˜¾ç¤º "Welcome back, Admin User!"
- âœ… æ˜¾ç¤ºåŠ è½½åŠ¨ç”»å’Œ "Redirecting you now..." æ–‡å­—
- âœ… 1.5ç§’åè‡ªåŠ¨è·³è½¬åˆ° `/home`

**æ§åˆ¶å°æ—¥å¿—**:
```
[Login] âœ… Already authenticated, will redirect to: /home
[Login] Redirecting now...
```

---

### âœ… åœºæ™¯ 4: è®¿é—®å—ä¿æŠ¤é¡µé¢ï¼ˆå¸¦ redirect å‚æ•°ï¼‰

**ç›®æ ‡**: éªŒè¯ç™»å½•åè·³è½¬åˆ°åŸå§‹é¡µé¢

**æ­¥éª¤**:
1. æ¸…é™¤ localStorageï¼ˆå›åˆ°æœªç™»å½•çŠ¶æ€ï¼‰
2. ç›´æ¥è®¿é—®: http://localhost:3000/profile
3. è§‚å¯Ÿè·³è½¬å’Œç™»å½•æµç¨‹

**é¢„æœŸç»“æœ**:
- âœ… è‡ªåŠ¨è·³è½¬åˆ° `/login?redirect=/profile`
- âœ… çœ‹åˆ°ç™»å½•é¡µé¢
- âœ… é€‰æ‹©è´¦å·ç™»å½•å
- âœ… è‡ªåŠ¨è·³è½¬åˆ° `/profile` é¡µé¢ï¼ˆè€Œä¸æ˜¯ `/home`ï¼‰

**æ§åˆ¶å°æ—¥å¿—**:
```
[AuthGuard] Checking auth for path: /profile
[AuthGuard] âŒ Unauthorized access, redirecting to login
[Login] Login successful, redirecting to: /profile
```

---

### âœ… åœºæ™¯ 5: å…¬å¼€è·¯ç”±æ— éœ€ç™»å½•

**ç›®æ ‡**: éªŒè¯å…¬å¼€è·¯ç”±å¯ä»¥ç›´æ¥è®¿é—®

**æ­¥éª¤**:
1. æ¸…é™¤ localStorage
2. è®¿é—®ä»¥ä¸‹å…¬å¼€è·¯ç”±ï¼š
   - http://localhost:3000/ (æ ¹è·¯å¾„)
   - http://localhost:3000/login
   - http://localhost:3000/about (å¦‚æœå­˜åœ¨)
   - http://localhost:3000/pricing (å¦‚æœå­˜åœ¨)

**é¢„æœŸç»“æœ**:
- âœ… ä¸ä¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µ
- âœ… ç›´æ¥æ˜¾ç¤ºå¯¹åº”é¡µé¢å†…å®¹

**æ§åˆ¶å°æ—¥å¿—**:
```
[AuthGuard] Public route, rendering directly
```

---

### âœ… åœºæ™¯ 6: ç”¨æˆ·èœå•å’Œç™»å‡º

**ç›®æ ‡**: éªŒè¯ç™»å‡ºåŠŸèƒ½æ­£å¸¸å·¥ä½œ

**æ­¥éª¤**:
1. ç¡®ä¿å·²ç™»å½•
2. ç‚¹å‡»å·¦ä¾§è¾¹æ åº•éƒ¨çš„ç”¨æˆ·å¤´åƒ/åç§°
3. åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© "Logout"
4. è§‚å¯Ÿè¡Œä¸º

**é¢„æœŸç»“æœ**:
- âœ… ä¸‹æ‹‰èœå•æ˜¾ç¤ºï¼š
  - Profile
  - Settings
  - Logoutï¼ˆçº¢è‰²æ–‡å­—ï¼‰
- âœ… ç‚¹å‡» Logout åç«‹å³è·³è½¬åˆ° `/login`
- âœ… localStorage è¢«æ¸…é™¤
- âœ… å†æ¬¡è®¿é—® `/home` æ—¶ä¼šè¢«æ‹¦æˆªå¹¶è·³è½¬åˆ°ç™»å½•é¡µ

**æ§åˆ¶å°æ—¥å¿—**:
```
[AuthStore] User logged out
[AuthGuard] âŒ Unauthorized access, redirecting to login
```

---

### âœ… åœºæ™¯ 7: æŒä¹…åŒ–çŠ¶æ€

**ç›®æ ‡**: éªŒè¯ç™»å½•çŠ¶æ€åœ¨åˆ·æ–°åä¿æŒ

**æ­¥éª¤**:
1. ç™»å½•ä»»æ„è´¦å·
2. åˆ·æ–°é¡µé¢ï¼ˆF5 æˆ– Cmd+Rï¼‰
3. è§‚å¯Ÿè¡Œä¸º

**é¢„æœŸç»“æœ**:
- âœ… é¡µé¢åˆ·æ–°åä»æ˜¾ç¤ºä¸ºç™»å½•çŠ¶æ€
- âœ… ç”¨æˆ·ä¿¡æ¯ä¿æŒä¸å˜
- âœ… æ— éœ€é‡æ–°ç™»å½•

**æ§åˆ¶å°æ—¥å¿—**:
```
[AuthStore] User refreshed: Admin User
[AuthGuard] âœ… Access granted
```

---

### âœ… åœºæ™¯ 8: åˆ‡æ¢ä¸åŒè´¦å·

**ç›®æ ‡**: éªŒè¯å¯ä»¥åˆ‡æ¢åˆ°ä¸åŒçš„æµ‹è¯•è´¦å·

**æ­¥éª¤**:
1. ç™»å½• Admin User
2. ç‚¹å‡» Logout
3. é‡æ–°ç™»å½• Test User 1
4. è§‚å¯Ÿå˜åŒ–

**é¢„æœŸç»“æœ**:
- âœ… å·¦ä¾§è¾¹æ æ˜¾ç¤ºæ–°çš„ç”¨æˆ·å¤´åƒå’Œåç§°
- âœ… Admin User çš„ç®¡ç†å‘˜æ ‡è¯†æ¶ˆå¤±
- âœ… ç”¨æˆ·èœå•æ˜¾ç¤ºæ–°ç”¨æˆ·å
- âœ… Profile é¡µé¢åŠ è½½æ–°ç”¨æˆ·çš„æ•°æ®

---

## ğŸ” è°ƒè¯•æ£€æŸ¥ç‚¹

### localStorage å†…å®¹æ£€æŸ¥

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š

```javascript
// æŸ¥çœ‹ Zustand è®¤è¯çŠ¶æ€
console.log('Auth State:', localStorage.getItem('muset-auth-storage'));

// æŸ¥çœ‹ AuthService ç”¨æˆ·ä¿¡æ¯
console.log('Current User:', localStorage.getItem('muset_current_user'));

// ç¾åŒ–æ˜¾ç¤º
try {
  const auth = JSON.parse(localStorage.getItem('muset-auth-storage'));
  console.table(auth.state.user);
} catch (e) {
  console.log('No auth data or parse error');
}
```

### ç½‘ç»œè¯·æ±‚æ£€æŸ¥

1. æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)
2. åˆ‡æ¢åˆ° "Network" æ ‡ç­¾
3. ç™»å½•åè®¿é—® `/profile` é¡µé¢
4. æŸ¥çœ‹ API è¯·æ±‚çš„ Headers

**é¢„æœŸ**:
- âœ… è¯·æ±‚åŒ…å« `X-User-ID: admin-001`ï¼ˆæˆ–å…¶ä»–ç™»å½•çš„ user_idï¼‰
- âœ… è¯·æ±‚åŒ…å« `X-Trace-ID: <uuid>`

---

## ğŸ“Š æµ‹è¯•ç»“æœè®°å½•

### ç¯å¢ƒä¿¡æ¯
- **æµè§ˆå™¨**: _____________
- **æ“ä½œç³»ç»Ÿ**: _____________
- **Node.js ç‰ˆæœ¬**: _____________
- **æµ‹è¯•æ—¥æœŸ**: _____________

### æµ‹è¯•æ¸…å•

| åœºæ™¯ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | é€šè¿‡ | å¤‡æ³¨ |
|------|---------|---------|------|------|
| 1. é¦–æ¬¡è®¿é—®ï¼ˆæœªç™»å½•ï¼‰ | è·³è½¬åˆ°ç™»å½•é¡µ | | â˜ | |
| 2. é€‰æ‹©è´¦å·ç™»å½• | æˆåŠŸç™»å½•å¹¶è·³è½¬ | | â˜ | |
| 3. å·²ç™»å½•è®¿é—®ç™»å½•é¡µ | æ˜¾ç¤º"å·²ç™»å½•"æç¤º | | â˜ | |
| 4. å¸¦ redirect å‚æ•°ç™»å½• | è·³è½¬åˆ°åŸå§‹é¡µé¢ | | â˜ | |
| 5. å…¬å¼€è·¯ç”±è®¿é—® | æ— éœ€ç™»å½• | | â˜ | |
| 6. ç™»å‡ºåŠŸèƒ½ | æ¸…é™¤çŠ¶æ€å¹¶è·³è½¬ | | â˜ | |
| 7. åˆ·æ–°é¡µé¢ | ä¿æŒç™»å½•çŠ¶æ€ | | â˜ | |
| 8. åˆ‡æ¢è´¦å· | æ˜¾ç¤ºæ–°ç”¨æˆ·ä¿¡æ¯ | | â˜ | |

---

## ğŸ› å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜ 1: ä»ç„¶çœ‹ä¸åˆ°ç™»å½•é¡µé¢

**è§£å†³æ–¹æ³•**:
```javascript
// 1. å½»åº•æ¸…é™¤æ‰€æœ‰å­˜å‚¨
localStorage.clear();
sessionStorage.clear();
if ('caches' in window) {
  caches.keys().then(names => {
    names.forEach(name => caches.delete(name));
  });
}

// 2. å¼ºåˆ¶åˆ·æ–°
location.href = '/login';
location.reload(true); // å¼ºåˆ¶ä»æœåŠ¡å™¨é‡æ–°åŠ è½½
```

### é—®é¢˜ 2: ç™»å½•åæ²¡æœ‰è·³è½¬

**æ£€æŸ¥**:
1. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript é”™è¯¯
2. Network æ ‡ç­¾æ˜¯å¦æ˜¾ç¤ºç½‘ç»œè¯·æ±‚å¤±è´¥
3. localStorage ä¸­æ˜¯å¦æˆåŠŸä¿å­˜äº†ç”¨æˆ·ä¿¡æ¯

**è§£å†³æ–¹æ³•**:
```javascript
// æ‰‹åŠ¨è®¾ç½®ç™»å½•çŠ¶æ€è¿›è¡Œæµ‹è¯•
localStorage.setItem('muset_current_user', JSON.stringify({
  id: 'admin-001',
  username: 'Admin User',
  email: 'admin@muset.ai',
  role: 'admin',
  avatar: 'ğŸ‘¨â€ğŸ’¼'
}));

// åˆ·æ–° Zustand store
location.reload();
```

### é—®é¢˜ 3: æ§åˆ¶å°æ²¡æœ‰æ—¥å¿—è¾“å‡º

**æ£€æŸ¥**:
1. ç¡®ä¿æµè§ˆå™¨æ§åˆ¶å°å·²æ‰“å¼€
2. æ§åˆ¶å°è¿‡æ»¤å™¨æ²¡æœ‰è¿‡æ»¤æ‰ log ä¿¡æ¯
3. æŸ¥çœ‹æ˜¯å¦æœ‰ "Verbose" æˆ– "All" çº§åˆ«çš„æ—¥å¿—

### é—®é¢˜ 4: ç”¨æˆ·èœå•ä¸æ˜¾ç¤º

**æ£€æŸ¥**:
1. å·¦ä¾§è¾¹æ æ˜¯å¦æ­£å¸¸æ¸²æŸ“
2. æ§åˆ¶å°æ˜¯å¦æœ‰ React ç»„ä»¶é”™è¯¯
3. UserMenu ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥

---

## âœ… éªŒè¯é€šè¿‡æ ‡å‡†

æ‰€æœ‰ä»¥ä¸‹æ¡ä»¶éƒ½æ»¡è¶³æ‰ç®—æµ‹è¯•é€šè¿‡ï¼š

- [ ] 8 ä¸ªæµ‹è¯•åœºæ™¯å…¨éƒ¨é€šè¿‡
- [ ] localStorage æ­£ç¡®å­˜å‚¨å’Œè¯»å–ç”¨æˆ·ä¿¡æ¯
- [ ] API è¯·æ±‚åŒ…å«æ­£ç¡®çš„ `X-User-ID` header
- [ ] æ§åˆ¶å°æ—¥å¿—æ¸…æ™°ï¼Œæ— é”™è¯¯
- [ ] TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡ï¼ˆ`npm run type-check`ï¼‰
- [ ] æ—  React è­¦å‘Šæˆ–é”™è¯¯
- [ ] é¡µé¢è·³è½¬æµç•…ï¼Œæ— é—ªçƒ
- [ ] ç”¨æˆ·ä½“éªŒå‹å¥½ï¼Œæœ‰é€‚å½“çš„åŠ è½½æç¤º

---

## ğŸ“ æµ‹è¯•åé¦ˆ

å¦‚æœå‘ç°ä»»ä½•é—®é¢˜ï¼Œè¯·è®°å½•ï¼š

1. **é—®é¢˜æè¿°**: _____________
2. **é‡ç°æ­¥éª¤**: _____________
3. **é¢„æœŸè¡Œä¸º**: _____________
4. **å®é™…è¡Œä¸º**: _____________
5. **æ§åˆ¶å°æ—¥å¿—**: _____________
6. **æµè§ˆå™¨/ç¯å¢ƒ**: _____________

---

**æµ‹è¯•å‡†å¤‡å®Œæˆ** âœ…  
**ç°åœ¨å¯ä»¥å¼€å§‹ç”¨æˆ·éªŒè¯äº†ï¼** ğŸš€







