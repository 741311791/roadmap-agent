[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "sh -c 'python scripts/create_tables.py && alembic stamp head && python scripts/create_admin_user.py --email ${ADMIN_EMAIL:-admin@example.com} --password ${ADMIN_PASSWORD:-admin123} --username ${ADMIN_USERNAME:-admin} || true && uvicorn app.main:app --host 0.0.0.0 --port $PORT'"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

